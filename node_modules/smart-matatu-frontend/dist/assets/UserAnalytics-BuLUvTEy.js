import{b as v,u as b,j as e}from"./index-BRy-12qz.js";import{r as l}from"./vendor-BKU87Gzz.js";import{R as g,A as u,B as f,l as R,V as w,Y as A,M as I,h as S,z as p,d as C,o as T}from"./icons-B9e0n2uV.js";import"./router-BF-yxxER.js";const E=()=>{var h;const{state:i}=v(),{t:r}=b(),[s,N]=l.useState(null),[j,o]=l.useState(!0),[x,m]=l.useState(null),[n,y]=l.useState("30d"),c=async()=>{var t,a;try{o(!0),m(null),console.log(`Loading user analytics for: ${(t=i.user)==null?void 0:t._id}, period: ${n}`);const d={userId:((a=i.user)==null?void 0:a._id)||"",period:n,personalStats:{totalReports:12,totalRatings:8,favoriteRoutes:3,avgRatingGiven:4.2,reportsThisMonth:5,ratingsThisMonth:3},routeInsights:{mostReportedRoute:{routeName:"City Center to Airport",routeNumber:"34",reportCount:4,lastReport:"2 days ago"},bestRatedRoute:{routeName:"Downtown Express",routeNumber:"15",avgRating:4.8,totalRatings:156},recentActivity:[{routeName:"Route 34",routeNumber:"34",action:"Reported delay",date:"2 days ago"},{routeName:"Route 15",routeNumber:"15",action:"Rated 5 stars",date:"3 days ago"},{routeName:"Route 22",routeNumber:"22",action:"Reported safety issue",date:"1 week ago"}]},safetyInsights:{safetyReports:3,delayReports:6,breakdownReports:2,avgResponseTime:"2.5 hours",resolvedReports:8},recommendations:{suggestedRoutes:[{routeName:"Route 15",routeNumber:"15",reason:"Highly rated by users",avgRating:4.8},{routeName:"Route 28",routeNumber:"28",reason:"Reliable and punctual",avgRating:4.5}],safetyTips:["Avoid peak hours (7-9 AM, 5-7 PM) for better safety","Route 15 has the best safety record in your area","Report any safety concerns immediately for faster response"],peakHours:[{hour:"7:00-9:00 AM",recommendation:"High traffic, allow extra time"},{hour:"5:00-7:00 PM",recommendation:"Peak hours, consider alternative routes"}]}};N(d),console.log("User analytics data set:",d)}catch(d){m("Failed to load user analytics"),console.error("User analytics error:",d)}finally{o(!1)}};return l.useEffect(()=>{var t;(t=i.user)!=null&&t._id&&c()},[n,(h=i.user)==null?void 0:h._id]),j?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:r("userAnalytics.loading")})]})}):x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"w-8 h-8 mx-auto mb-4 text-red-600"}),e.jsx("p",{className:"text-red-600 mb-4",children:x}),e.jsx("button",{onClick:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r("userAnalytics.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:r("userAnalytics.subtitle")})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:n,onChange:t=>y(t.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.personalStats.totalReports}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.personalStats.reportsThisMonth," this month"]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(R,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Ratings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.personalStats.totalRatings}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Avg: ",s.personalStats.avgRatingGiven,"/5"]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Favorite Routes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.personalStats.favoriteRoutes}),e.jsx("p",{className:"text-xs text-gray-500",children:"Saved routes"})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(A,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activity Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"85%"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Very active user"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{className:"w-5 h-5 mr-2 text-blue-500"}),r("userAnalytics.routeInsights.title")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Most Reported Route"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.routeInsights.mostReportedRoute.routeNumber," - ",s.routeInsights.mostReportedRoute.routeName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.routeInsights.mostReportedRoute.reportCount," reports, last: ",s.routeInsights.mostReportedRoute.lastReport]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Best Rated Route"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.routeInsights.bestRatedRoute.routeNumber," - ",s.routeInsights.bestRatedRoute.routeName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.routeInsights.bestRatedRoute.avgRating,"/5 stars (",s.routeInsights.bestRatedRoute.totalRatings," ratings)"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(S,{className:"w-5 h-5 mr-2 text-green-500"}),r("userAnalytics.recentActivity.title")]}),e.jsx("div",{className:"space-y-3",children:s.routeInsights.recentActivity.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.routeNumber," - ",t.routeName]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.action})]}),e.jsx("span",{className:"text-xs text-gray-400",children:t.date})]},a))})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(u,{className:"w-5 h-5 mr-2 text-orange-500"}),r("userAnalytics.safetyInsights.title")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.safetyInsights.safetyReports}),e.jsx("p",{className:"text-sm text-gray-500",children:"Safety Reports"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.safetyInsights.delayReports}),e.jsx("p",{className:"text-sm text-gray-500",children:"Delay Reports"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.safetyInsights.resolvedReports}),e.jsx("p",{className:"text-sm text-gray-500",children:"Resolved Reports"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Average Response Time:"})," ",s.safetyInsights.avgResponseTime]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-green-500"}),r("userAnalytics.recommendations.title")]}),e.jsx("div",{className:"space-y-3",children:s.recommendations.suggestedRoutes.map((t,a)=>e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[t.routeNumber," - ",t.routeName]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.reason})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600",children:[t.avgRating,"/5"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"stars"})]})]})},a))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 mr-2 text-blue-500"}),"Safety Tips"]}),e.jsx("div",{className:"space-y-3",children:s.recommendations.safetyTips.map((t,a)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx(p,{className:"w-4 h-4 mr-2 text-green-500 mt-0.5"}),e.jsx("p",{className:"text-sm text-gray-600",children:t})]},a))})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2 text-purple-500"}),r("userAnalytics.peakHours.title")]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.recommendations.peakHours.map((t,a)=>e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.hour}),e.jsx("p",{className:"text-sm text-gray-600",children:t.recommendation})]},a))})]})]})})]})};export{E as default};
//# sourceMappingURL=UserAnalytics-BuLUvTEy.js.map
