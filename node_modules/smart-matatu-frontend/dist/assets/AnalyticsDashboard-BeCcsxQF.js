import{u as f,b as v,a as m,j as e}from"./index-ByvNfErA.js";import{r as l}from"./vendor-BKU87Gzz.js";import"./router-Z6rqMkFf.js";import"./icons-BSDC5w2I.js";const D=()=>{const{t}=f(),{state:n}=v(),[r,h]=l.useState(null),[u,d]=l.useState(!0),[i,p]=l.useState("7d"),[c,o]=l.useState(null);l.useEffect(()=>{x()},[i]);const x=async()=>{try{d(!0),o(null);const s=await m.getAnalyticsDashboard(i);h(s.data||null)}catch(s){o(s instanceof Error?s.message:"Failed to load analytics data")}finally{d(!1)}},g=async()=>{if(n.user)try{await m.trackEvent("page_view",{page:"analytics_dashboard",timestamp:new Date().toISOString()},void 0,n.user._id)}catch(s){console.error("Failed to track page view:",s)}};l.useEffect(()=>{g()},[]);const j=(s,a)=>{switch(s){case"api_response_time":return`${a.toFixed(2)}ms`;case"page_load_time":return`${a.toFixed(2)}s`;case"error_rate":return`${(a*100).toFixed(2)}%`;case"user_engagement":return a.toFixed(1);default:return a.toString()}},y=(s,a)=>{switch(s){case"api_response_time":return a<200?"text-green-600":a<500?"text-yellow-600":"text-red-600";case"page_load_time":return a<2?"text-green-600":a<5?"text-yellow-600":"text-red-600";case"error_rate":return a<.01?"text-green-600":a<.05?"text-yellow-600":"text-red-600";case"user_engagement":return a>5?"text-green-600":a>2?"text-yellow-600":"text-red-600";default:return"text-gray-600"}};return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:t("common.loading")})]})}):c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-6 max-w-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:t("analyticsDashboard.error")}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:c}),e.jsx("button",{onClick:x,className:"mt-3 bg-red-100 text-red-800 px-3 py-1 rounded-md text-sm hover:bg-red-200",children:t("common.retry")})]})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("analyticsDashboard.title")}),e.jsx("p",{className:"mt-2 text-gray-600",children:t("analyticsDashboard.subtitle")})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("select",{value:i,onChange:s=>p(s.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"7d",children:t("analyticsDashboard.last7Days")}),e.jsx("option",{value:"30d",children:t("analyticsDashboard.last30Days")})]})})]})}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("analyticsDashboard.totalEvents")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.eventCounts.reduce((s,a)=>s+a.count,0)})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("analyticsDashboard.activeUsers")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.userEngagement.totalUsers})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("analyticsDashboard.avgEngagement")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.userEngagement.avgEvents.toFixed(1)})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t("analyticsDashboard.performanceScore")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.performanceMetrics.length>0?"Good":"N/A"})]})})]})})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg mb-8",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:t("analyticsDashboard.eventTypes")}),e.jsx("div",{className:"space-y-4",children:r.eventCounts.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:s._id.replace("_"," ")})]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.count})]},s._id))})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:t("analyticsDashboard.performanceMetrics")}),r.performanceMetrics.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("analyticsDashboard.metric")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("analyticsDashboard.value")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("analyticsDashboard.endpoint")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("analyticsDashboard.timestamp")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.performanceMetrics.slice(0,10).map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:s.metricType.replace("_"," ")}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${y(s.metricType,s.value)}`,children:j(s.metricType,s.value)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.endpoint||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.timestamp).toLocaleString()})]},a))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("analyticsDashboard.noMetrics")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("analyticsDashboard.noMetricsDesc")})]})]})})]})]})})};export{D as default};
//# sourceMappingURL=AnalyticsDashboard-BeCcsxQF.js.map
