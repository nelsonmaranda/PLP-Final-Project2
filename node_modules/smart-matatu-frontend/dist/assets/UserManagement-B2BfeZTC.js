import{j as e}from"./index-Btwfwc6U.js";import{r}from"./vendor-BKU87Gzz.js";import{R as m,a3 as q,c as h,a4 as L,a5 as _,f as T,G as z,b as E,w as M,g as N,a6 as f,y as F}from"./icons-B_aqzpWL.js";import"./router-Z6rqMkFf.js";function G(){const[w,d]=r.useState([]),[b,p]=r.useState(!0),[i,v]=r.useState(""),[o,R]=r.useState("all"),[n,C]=r.useState("all"),[x,c]=r.useState(null);r.useEffect(()=>{u()},[]);const u=async()=>{try{p(!0),d([{_id:"1",email:"john@sacco.com",displayName:"John Mwangi",role:"user",requestedRole:"sacco",status:"pending",organization:"Nairobi City Sacco",createdAt:"2025-09-20T10:00:00Z"},{_id:"2",email:"mary@authority.ke",displayName:"Mary Wanjiku",role:"user",requestedRole:"authority",status:"pending",organization:"Transport Authority",createdAt:"2025-09-21T14:30:00Z"},{_id:"3",email:"peter@admin.com",displayName:"Peter Kimani",role:"admin",status:"active",createdAt:"2025-09-15T09:00:00Z",approvedAt:"2025-09-15T09:00:00Z"}])}catch(s){console.error("Error loading users:",s)}finally{p(!1)}},S=async s=>{try{c(s),await new Promise(a=>setTimeout(a,1e3)),d(a=>a.map(t=>t._id===s?{...t,role:t.requestedRole||t.role,status:"active",requestedRole:void 0,approvedAt:new Date().toISOString()}:t))}catch(a){console.error("Error approving user:",a)}finally{c(null)}},k=async(s,a)=>{try{c(s),await new Promise(t=>setTimeout(t,1e3)),d(t=>t.map(l=>l._id===s?{...l,status:"rejected",rejectionReason:a,requestedRole:void 0}:l))}catch(t){console.error("Error rejecting user:",t)}finally{c(null)}},g=s=>{switch(s){case"admin":return e.jsx(M,{className:"w-4 h-4"});case"sacco":return e.jsx(E,{className:"w-4 h-4"});case"authority":return e.jsx(z,{className:"w-4 h-4"});case"moderator":return e.jsx(T,{className:"w-4 h-4"});default:return e.jsx(h,{className:"w-4 h-4"})}},A=s=>{switch(s){case"active":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"suspended":return"text-red-600 bg-red-100";case"rejected":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},U=s=>{switch(s){case"active":return e.jsx(F,{className:"w-4 h-4"});case"pending":return e.jsx(N,{className:"w-4 h-4"});case"suspended":return e.jsx(f,{className:"w-4 h-4"});case"rejected":return e.jsx(f,{className:"w-4 h-4"});default:return e.jsx(N,{className:"w-4 h-4"})}},j=w.filter(s=>{var y;const a=s.displayName.toLowerCase().includes(i.toLowerCase())||s.email.toLowerCase().includes(i.toLowerCase())||((y=s.organization)==null?void 0:y.toLowerCase().includes(i.toLowerCase())),t=o==="all"||s.status===o,l=n==="all"||s.role===n||s.requestedRole===n;return a&&t&&l});return b?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user roles and permissions"})]}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:s=>v(s.target.value),placeholder:"Search users...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o,onChange:s=>R(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:n,onChange:s=>C(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"sacco",children:"SACCO"}),e.jsx("option",{value:"authority",children:"Authority"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.displayName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[g(s.role),e.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:s.role})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.requestedRole?e.jsxs("div",{className:"flex items-center",children:[g(s.requestedRole),e.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:s.requestedRole})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(s.status)}`,children:[U(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.organization||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.status==="pending"&&s.requestedRole&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>S(s._id),disabled:x===s._id,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:[x===s._id?e.jsx(m,{className:"w-3 h-3 animate-spin"}):e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Approve"})]}),e.jsxs("button",{onClick:()=>{const a=prompt("Rejection reason:");a&&k(s._id,a)},disabled:x===s._id,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Reject"})]})]}),s.status==="active"&&e.jsx("span",{className:"text-green-600 text-xs",children:"Active"})]})]},s._id))})]})})}),j.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})}export{G as default};
//# sourceMappingURL=UserManagement-B2BfeZTC.js.map
