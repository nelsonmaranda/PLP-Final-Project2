import{u as z,b as D,a as h,j as e}from"./index-Darj_tO4.js";import{r as c}from"./vendor-BKU87Gzz.js";import{b as P,c as B}from"./router-BF-yxxER.js";import"./icons-l6XdvyrE.js";const U=()=>{var N;const{t:s}=z(),{state:o}=D(),x=P(),[p]=B(),[l,y]=c.useState([]),[r,w]=c.useState(null),[R,g]=c.useState(!0),[b,u]=c.useState(null),[f,j]=c.useState(null),m=((N=o.user)==null?void 0:N.email)==="nelsonmaranda2@gmail.com",L=t=>{if(!t)return 0;const a=new Date(t),i=new Date,n=a.getTime()-i.getTime(),d=Math.ceil(n/(1e3*60*60*24));return Math.max(0,d)},S=(t,a)=>{if(!a)return 365;const i=new Date(t),d=new Date(a).getTime()-i.getTime();return Math.ceil(d/(1e3*60*60*24))},M=t=>{switch(t){case"free":return[s("subscription.plans.free.features.basicInfo"),s("subscription.plans.free.features.reports"),s("subscription.plans.free.features.support")];case"premium":return[s("subscription.plans.premium.features.unlimitedReports"),s("subscription.plans.premium.features.advancedAnalytics"),s("subscription.plans.premium.features.prioritySupport"),s("subscription.plans.premium.features.realTimeNotifications")];case"sacco":return[s("subscription.plans.sacco.features.allPremium"),s("subscription.plans.sacco.features.revenueAnalytics"),s("subscription.plans.sacco.features.customBranding"),s("subscription.plans.sacco.features.apiAccess"),s("subscription.plans.sacco.features.dedicatedSupport")];case"enterprise":return[s("subscription.plans.enterprise.features.allSacco"),s("subscription.plans.enterprise.features.whiteLabel"),s("subscription.plans.enterprise.features.customIntegrations"),s("subscription.plans.enterprise.features.support247"),s("subscription.plans.enterprise.features.slaGuarantee")];default:return[]}};c.useEffect(()=>{v();const t=p.get("success"),a=p.get("plan");t==="true"&&a&&(j(`Successfully upgraded to ${a} plan!`),x("/subscription",{replace:!0}))},[p,x]);const v=async()=>{try{g(!0);const[t,a]=await Promise.all([h.getSubscriptionPlans(),o.user?h.getUserSubscription(o.user._id):null]);y(t.data||[]),a&&w(a.data||null)}catch(t){u(t instanceof Error?t.message:"Failed to load subscription data")}finally{g(!1)}},C=t=>{const a=l.find(n=>n.id===t);if(!a){u("Plan not found");return}if(m){T(t);return}const i=new URLSearchParams({plan:t,amount:a.price.toString(),planName:a.name});x(`/payment?${i.toString()}`)},T=async t=>{try{(await h.confirmPayment("admin_payment",t)).success&&await v()}catch{u("Failed to activate plan. Please try again.")}};return R?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:s("common.loading")})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:s("subscription.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:s("subscription.subtitle")})]}),r&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${m?"border-purple-500":"border-blue-500"}`,children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[s("subscription.currentPlan"),m&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:s("subscription.adminAccess")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600 capitalize",children:s(`subscription.planTypes.${r.planType}`)}),e.jsxs("p",{className:"text-gray-600",children:[s("subscription.status"),":",e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s(`subscription.statusTypes.${r.status}`)})]}),r.endDate&&e.jsxs("p",{className:"text-sm text-gray-500",children:[s("subscription.expires"),": ",new Date(r.endDate).toLocaleDateString()]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[s("subscription.daysRemaining"),": ",e.jsx("span",{className:"font-semibold text-blue-600",children:L(r.endDate)})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s("subscription.totalSubscription"),": ",e.jsxs("span",{className:"font-semibold text-gray-700",children:[S(r.startDate,r.endDate)," ",s("subscription.days")," (",s("subscription.yearly"),")"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[s("subscription.features"),":"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(r.features).map(([t,a])=>a&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:s(`subscription.featureNames.${t}`)},t))})]})]})]})}),f&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-800",children:f})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:()=>j(null),className:"text-green-400 hover:text-green-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})}),b&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:b})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map(t=>{const a=(r==null?void 0:r.planType)===t.id,i=t.id==="premium";return e.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg overflow-hidden ${i?"ring-2 ring-blue-500":""} ${a?"opacity-75":""}`,children:[i&&e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-sm font-medium",children:s("subscription.popular")}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:s(`subscription.planTypes.${t.id}`)}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:t.price===0?s("subscription.free"):`KES ${t.price}`}),t.price>0&&e.jsxs("span",{className:"text-gray-600",children:["/",s("subscription.month")]})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:M(t.id).map((n,d)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:n})]},d))}),e.jsx("button",{onClick:()=>C(t.id),disabled:a,className:`w-full py-3 px-4 rounded-md font-medium transition-colors ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-900 text-white hover:bg-gray-800"}`,children:a?s("subscription.current"):t.price===0?s("subscription.getStarted"):s("subscription.selectPlan")})]})]},t.id)})}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-8",children:s("subscription.featureComparison")}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s("subscription.features")}),l.map(t=>e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:s(`subscription.planTypes.${t.id}`)},t.id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s("subscription.basicReports")}),l.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("svg",{className:"h-5 w-5 text-green-500 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},t.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s("subscription.unlimitedReports")}),l.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:t.id==="free"?e.jsx("span",{className:"text-gray-400",children:"5/month"}):e.jsx("svg",{className:"h-5 w-5 text-green-500 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},t.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s("subscription.advancedAnalytics")}),l.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:["premium","sacco","enterprise"].includes(t.id)?e.jsx("svg",{className:"h-5 w-5 text-green-500 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},t.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s("subscription.prioritySupport")}),l.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:["premium","sacco","enterprise"].includes(t.id)?e.jsx("svg",{className:"h-5 w-5 text-green-500 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},t.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s("subscription.apiAccess")}),l.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:["sacco","enterprise"].includes(t.id)?e.jsx("svg",{className:"h-5 w-5 text-green-500 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-gray-300 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},t.id))]})]})]})})})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-8",children:s("subscription.faq")}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.faq1.question")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.faq1.answer")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.faq2.question")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.faq2.answer")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.faq3.question")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.faq3.answer")})]})]})]})]})})};export{U as default};
//# sourceMappingURL=Subscription-DKc0Hkml.js.map
