import{j as e,a as d,u as E}from"./index-N0cMQqFc.js";import{r}from"./vendor-BKU87Gzz.js";import{L as l}from"./router-Z6rqMkFf.js";import{M as y,B as p,f as g,c as A,k as H,g as L,l as F,A as V,m as _,D as k,W as $,T as D,N as K,n as O,E as B,C,Z as G}from"./icons-B_aqzpWL.js";function Z(){const[i,x]=r.useState("loading"),[n,m]=r.useState({totalRoutes:0,totalReports:0,averageScore:0,totalUsers:0});r.useEffect(()=>{(async()=>{try{const t=await d.getHealth();x(t!=null&&t.success?"online":"offline")}catch{x("offline")}})()},[]),r.useEffect(()=>{(async()=>{try{const t=await d.getAnalytics();t.success&&t.data&&m({totalRoutes:t.data.totalRoutes??0,totalReports:t.data.totalReports??0,averageScore:Number(t.data.averageScore??0),totalUsers:t.data.totalUsers??0})}catch{}})()},[]);const h=[{label:"Active Routes",value:n.totalRoutes.toLocaleString(),icon:y},{label:"Reports Today",value:n.totalReports.toLocaleString(),icon:p},{label:"Safety Rating",value:`${n.averageScore.toFixed(1)}★`,icon:g},{label:"Active Users",value:n.totalUsers.toLocaleString(),icon:A}],o=[{title:"Real-time Route Tracking",description:"Get live updates on matatu locations, delays, and availability.",icon:L},{title:"Safety Reports",description:"Report and view safety incidents to help keep everyone safe.",icon:g},{title:"Reliability Scores",description:"See which routes are most reliable based on community data.",icon:F},{title:"Community Insights",description:"Share experiences and help others make informed transport decisions.",icon:A}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("section",{className:"hero",role:"banner",children:e.jsx("div",{className:"hero-content",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Welcome to"," ",e.jsx("span",{className:"text-primary-600",children:"Smart Matatu"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Find reliable and safe matatu routes across Nairobi with real-time updates, community insights, and safety information."}),e.jsxs("div",{className:"mb-8",role:"status","aria-live":"polite",children:[i==="loading"&&e.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-yellow-100 text-yellow-800",children:[e.jsx("div",{className:"loading-spinner mr-2","aria-hidden":"true"}),"Checking system status..."]}),i==="online"&&e.jsx("div",{className:"status-online",children:"System Online - All services operational"}),i==="offline"&&e.jsx("div",{className:"status-offline",children:"System Offline - Limited functionality"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(l,{to:"/map",className:"btn btn-primary btn-lg",children:["View Map",e.jsx(H,{className:"w-5 h-5 ml-2","aria-hidden":"true"})]}),e.jsx(l,{to:"/report",className:"btn btn-outline btn-lg",children:"Report Trip"})]})]})})}),e.jsx("section",{className:"section bg-white","aria-labelledby":"stats-heading",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{id:"stats-heading",className:"sr-only",children:"Platform Statistics"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:h.map(a=>{const t=a.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary-100 rounded-lg mb-4",children:e.jsx(t,{className:"w-6 h-6 text-primary-600","aria-hidden":"true"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.value}),e.jsx("div",{className:"text-sm text-gray-600",children:a.label})]},a.label)})})]})}),e.jsx("section",{className:"section bg-gray-50","aria-labelledby":"features-heading",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{id:"features-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"How Smart Matatu Works"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our platform combines community insights with real-time data to make Nairobi's transport system more reliable and safe."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:o.map(a=>{const t=a.icon;return e.jsx("article",{className:"card",children:e.jsxs("div",{className:"card-content text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-secondary-100 rounded-lg mb-4",children:e.jsx(t,{className:"w-6 h-6 text-secondary-600","aria-hidden":"true"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:a.description})]})},a.title)})})]})}),e.jsx("section",{className:"section bg-primary-600","aria-labelledby":"cta-heading",children:e.jsxs("div",{className:"container text-center",children:[e.jsx("h2",{id:"cta-heading",className:"text-3xl font-bold text-white mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-xl text-primary-100 mb-8 max-w-2xl mx-auto",children:"Join thousands of Nairobi commuters who are already using Smart Matatu to make their daily journeys safer and more reliable."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(l,{to:"/signup",className:"btn btn-secondary btn-lg",children:"Sign Up Now"}),e.jsx(l,{to:"/map",className:"btn btn-outline btn-lg text-white border-white hover:bg-white hover:text-primary-600",children:"Explore Map"})]})]})})]})}function z(){var R;const{state:i}=E(),[x,n]=r.useState(!0),[m,h]=r.useState(null),[o,a]=r.useState(null),[t,T]=r.useState(null),[f,I]=r.useState([]),[v,U]=r.useState([]),[w,W]=r.useState([]),u=r.useCallback(async()=>{if(i.user){n(!0),h(null);try{const[s,c,j,b,N]=await Promise.all([d.getDashboardStats(),d.getWeatherData(),d.getRouteInsights(),d.getFavoriteRoutes(i.user._id),d.getUserReports(i.user._id)]);s.success&&s.data&&a(s.data),c.success&&c.data&&T(c.data),j.success&&j.data&&I(j.data.insights),b.success&&b.data&&U(b.data.routes),N.success&&N.data&&W(N.data.reports.slice(0,5))}catch(s){console.error("Error loading dashboard data:",s),h("Failed to load dashboard data. Please try again.")}finally{n(!1)}}},[i.user]);r.useEffect(()=>{u()},[u]);const M=s=>{const c=s.toLowerCase();return c.includes("rain")?e.jsx(k,{className:"w-6 h-6 text-blue-500"}):c.includes("cloud")?e.jsx(C,{className:"w-6 h-6 text-gray-500"}):c.includes("sun")?e.jsx(G,{className:"w-6 h-6 text-yellow-500"}):e.jsx(C,{className:"w-6 h-6 text-gray-500"})},P=s=>{switch(s){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},S=s=>s>=4?"text-green-600":s>=3?"text-yellow-600":"text-red-600";return x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your smart dashboard..."})]})}):m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsx("button",{onClick:u,className:"btn btn-primary",children:"Try Again"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(R=i.user)==null?void 0:R.displayName,"!"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Here's your personalized matatu insights for today"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("en-KE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("en-KE",{hour:"2-digit",minute:"2-digit"})})]})]})})}),e.jsxs("div",{className:"px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[t&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Current Weather"}),M(t.condition)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-2xl font-bold",children:[t.temperature,"°C"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.humidity,"% humidity"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.windSpeed," km/h"]})]}),e.jsx("p",{className:"text-sm opacity-90",children:t.condition})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Routes"}),e.jsx(y,{className:"w-6 h-6 text-primary-500"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.totalRoutes}),e.jsx("p",{className:"text-sm text-gray-600",children:"Routes monitored"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Avg Fare"}),e.jsx(D,{className:"w-6 h-6 text-green-500"})]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["KES ",o.averageFare]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Current average"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Safety Rating"}),e.jsx(g,{className:"w-6 h-6 text-blue-500"})]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:[o.safetyRating.toFixed(1),"/5"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Overall safety"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Smart Route Insights"}),e.jsx(l,{to:"/map",className:"btn btn-ghost btn-sm",children:"View All Routes"})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"AI-powered recommendations for your daily commute"})]}),e.jsx("div",{className:"p-6",children:f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No route insights available"}),e.jsx(l,{to:"/map",className:"btn btn-primary",children:"Explore Routes"})]}):e.jsx("div",{className:"space-y-4",children:f.slice(0,5).map((s,c)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.routeName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Route ID: ",s.routeId]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${P(s.crowdDensity.level)}`,children:[s.crowdDensity.level," crowd"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["KES ",s.farePrediction.predictedFare]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Predicted fare"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:`w-4 h-4 ${S(s.safetyScore.overallScore)}`}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-medium ${S(s.safetyScore.overallScore)}`,children:[s.safetyScore.overallScore.toFixed(1),"/5"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Safety score"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s.travelTime," min"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Travel time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.recommendedTime}),e.jsx("div",{className:"text-xs text-gray-500",children:"Best time"})]})]})]})]},c))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Favorites"})}),e.jsx("div",{className:"p-6",children:v.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(F,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No favorite routes yet"}),e.jsx(l,{to:"/map",className:"btn btn-ghost btn-sm",children:"Add Favorites"})]}):e.jsx("div",{className:"space-y-3",children:v.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["Route ",s.routeNumber]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.name})]}),e.jsx(l,{to:`/map?route=${s._id}`,className:"btn btn-ghost btn-sm",children:"View"})]},s._id))})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Reports"})}),e.jsx("div",{className:"p-6",children:w.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(p,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"No reports submitted"}),e.jsx(l,{to:"/report",className:"btn btn-ghost btn-sm",children:"Submit Report"})]}):e.jsx("div",{className:"space-y-3",children:w.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.reportType}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]})]},s._id))})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs(l,{to:"/map",className:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(y,{className:"w-5 h-5 text-primary-500"}),e.jsx("span",{className:"text-gray-900",children:"View Map"})]}),e.jsxs(l,{to:"/report",className:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(p,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-gray-900",children:"Submit Report"})]}),e.jsxs(l,{to:"/profile",className:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(B,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-gray-900",children:"View Profile"})]})]})]})]})]})]})]})}function X(){const{state:i}=E();return i.isAuthenticated?e.jsx(z,{}):e.jsx(Z,{})}export{X as default};
//# sourceMappingURL=HomePage-CcA2sdlb.js.map
