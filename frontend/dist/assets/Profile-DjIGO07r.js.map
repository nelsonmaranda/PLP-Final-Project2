{"version":3,"file":"Profile-DjIGO07r.js","sources":["../../src/screens/Profile.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { \r\n  User, \r\n  History, \r\n  Heart, \r\n  BarChart3, \r\n  Edit3, \r\n  Save, \r\n  X,\r\n  MapPin,\r\n  Clock,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n  Star\r\n} from 'lucide-react'\r\nimport { useApp } from '../contexts/AppContext'\r\nimport apiService from '../services/api'\r\nimport { Report, Route } from '../types'\r\n\r\nexport default function Profile() {\r\n  const { state, setUser } = useApp()\r\n  const [activeTab, setActiveTab] = useState<'profile' | 'reports' | 'favorites' | 'analytics'>('profile')\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [success, setSuccess] = useState(false)\r\n  \r\n  // Profile editing state\r\n  const [profileData, setProfileData] = useState({\r\n    displayName: state.user?.displayName || '',\r\n    email: state.user?.email || ''\r\n  })\r\n  \r\n  // Reports state\r\n  const [reports, setReports] = useState<Report[]>([])\r\n  const [reportsLoading, setReportsLoading] = useState(false)\r\n  \r\n  // Favorites state\r\n  const [favoriteRoutes, setFavoriteRoutes] = useState<Route[]>([])\r\n  const [favoritesLoading, setFavoritesLoading] = useState(false)\r\n  \r\n  // Analytics state\r\n  const [analytics, setAnalytics] = useState({\r\n    totalReports: 0,\r\n    reportsThisMonth: 0,\r\n    favoriteRoutesCount: 0,\r\n    averageRating: 0,\r\n    mostReportedRoute: null as string | null\r\n  })\r\n\r\n  // Load user reports\r\n  const loadReports = useCallback(async () => {\r\n    if (!state.user) return\r\n    \r\n    setReportsLoading(true)\r\n    try {\r\n      const response = await apiService.getUserReports(state.user._id)\r\n      if (response.success && response.data) {\r\n        setReports(response.data.reports || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading reports:', error)\r\n    } finally {\r\n      setReportsLoading(false)\r\n    }\r\n  }, [state.user])\r\n\r\n  // Load favorite routes\r\n  const loadFavorites = useCallback(async () => {\r\n    if (!state.user) return\r\n    \r\n    setFavoritesLoading(true)\r\n    try {\r\n      const response = await apiService.getFavoriteRoutes(state.user._id)\r\n      if (response.success && response.data) {\r\n        setFavoriteRoutes(response.data.routes || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading favorites:', error)\r\n    } finally {\r\n      setFavoritesLoading(false)\r\n    }\r\n  }, [state.user])\r\n\r\n  // Load analytics\r\n  const loadAnalytics = useCallback(async () => {\r\n    if (!state.user) return\r\n    \r\n    try {\r\n      const response = await apiService.getUserAnalytics(state.user._id)\r\n      if (response.success && response.data) {\r\n        setAnalytics(response.data)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error)\r\n    }\r\n  }, [state.user])\r\n\r\n  // Load data when component mounts or user changes\r\n  useEffect(() => {\r\n    if (state.user) {\r\n      loadReports()\r\n      loadFavorites()\r\n      loadAnalytics()\r\n    }\r\n  }, [state.user, loadReports, loadFavorites, loadAnalytics])\r\n\r\n  // Handle profile update\r\n  const handleProfileUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!state.user) return\r\n\r\n    setIsLoading(true)\r\n    setError(null)\r\n    setSuccess(false)\r\n\r\n    try {\r\n      const response = await apiService.updateProfile(state.user._id, profileData)\r\n      if (response.success && response.data) {\r\n        setUser(response.data.user)\r\n        setSuccess(true)\r\n        setIsEditing(false)\r\n        setTimeout(() => setSuccess(false), 3000)\r\n      } else {\r\n        setError('Failed to update profile. Please try again.')\r\n      }\r\n    } catch (error) {\r\n      console.error('Profile update error:', error)\r\n      setError('Failed to update profile. Please try again.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  // Handle input change\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target\r\n    setProfileData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }))\r\n  }\r\n\r\n  // Remove favorite route\r\n  const removeFavorite = async (routeId: string) => {\r\n    if (!state.user) return\r\n    \r\n    try {\r\n      const response = await apiService.removeFavoriteRoute(state.user._id, routeId)\r\n      if (response.success) {\r\n        setFavoriteRoutes(prev => prev.filter(route => route._id !== routeId))\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing favorite:', error)\r\n    }\r\n  }\r\n\r\n  // Format date\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-KE', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  }\r\n\r\n  // Get severity color\r\n  const getSeverityColor = (severity: string) => {\r\n    switch (severity) {\r\n      case 'low': return 'text-green-600 bg-green-100'\r\n      case 'medium': return 'text-yellow-600 bg-yellow-100'\r\n      case 'high': return 'text-red-600 bg-red-100'\r\n      default: return 'text-gray-600 bg-gray-100'\r\n    }\r\n  }\r\n\r\n  if (!state.user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <User className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Please log in</h2>\r\n          <p className=\"text-gray-600 mb-4\">You need to be logged in to view your profile.</p>\r\n          <Link to=\"/login\" className=\"btn btn-primary\">\r\n            Go to Login\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"px-6 py-8\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center\">\r\n              <User className=\"w-8 h-8 text-white\" />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">{state.user.displayName}</h1>\r\n              <p className=\"text-gray-600\">{state.user.email}</p>\r\n              <p className=\"text-sm text-gray-500 capitalize\">Role: {state.user.role}</p>\r\n            </div>\r\n            <button\r\n              onClick={() => setIsEditing(!isEditing)}\r\n              className=\"btn btn-ghost btn-sm\"\r\n            >\r\n              <Edit3 className=\"w-4 h-4 mr-2\" />\r\n              {isEditing ? 'Cancel' : 'Edit Profile'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 mb-6\">\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"flex space-x-8 px-6\">\r\n              {[\r\n                { id: 'profile', name: 'Profile', icon: User },\r\n                { id: 'reports', name: 'My Reports', icon: History },\r\n                { id: 'favorites', name: 'Favorites', icon: Heart },\r\n                { id: 'analytics', name: 'Analytics', icon: BarChart3 }\r\n              ].map((tab) => {\r\n                const Icon = tab.icon\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id as any)}\r\n                    className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\r\n                      activeTab === tab.id\r\n                        ? 'border-primary-500 text-primary-600'\r\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    <Icon className=\"w-4 h-4\" />\r\n                    <span>{tab.name}</span>\r\n                  </button>\r\n                )\r\n              })}\r\n            </nav>\r\n          </div>\r\n\r\n          <div className=\"p-6\">\r\n            {/* Profile Tab */}\r\n            {activeTab === 'profile' && (\r\n              <div>\r\n                {isEditing ? (\r\n                  <form onSubmit={handleProfileUpdate} className=\"space-y-4\">\r\n                    {error && (\r\n                      <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n                        <div className=\"flex items-center\">\r\n                          <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\r\n                          <p className=\"text-sm text-red-800\">{error}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {success && (\r\n                      <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n                        <div className=\"flex items-center\">\r\n                          <CheckCircle className=\"h-5 w-5 text-green-400 mr-2\" />\r\n                          <p className=\"text-sm text-green-800\">Profile updated successfully!</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div>\r\n                      <label htmlFor=\"displayName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Display Name\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"displayName\"\r\n                        name=\"displayName\"\r\n                        value={profileData.displayName}\r\n                        onChange={handleInputChange}\r\n                        className=\"input w-full\"\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Email Address\r\n                      </label>\r\n                      <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        value={profileData.email}\r\n                        onChange={handleInputChange}\r\n                        className=\"input w-full\"\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"flex space-x-3\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"btn btn-primary\"\r\n                      >\r\n                        {isLoading ? (\r\n                          <>\r\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                            Saving...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Save className=\"w-4 h-4 mr-2\" />\r\n                            Save Changes\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setIsEditing(false)}\r\n                        className=\"btn btn-ghost\"\r\n                      >\r\n                        <X className=\"w-4 h-4 mr-2\" />\r\n                        Cancel\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                ) : (\r\n                  <div className=\"space-y-6\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Account Information</h3>\r\n                      <dl className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                        <div>\r\n                          <dt className=\"text-sm font-medium text-gray-500\">Display Name</dt>\r\n                          <dd className=\"mt-1 text-sm text-gray-900\">{state.user.displayName}</dd>\r\n                        </div>\r\n                        <div>\r\n                          <dt className=\"text-sm font-medium text-gray-500\">Email Address</dt>\r\n                          <dd className=\"mt-1 text-sm text-gray-900\">{state.user.email}</dd>\r\n                        </div>\r\n                        <div>\r\n                          <dt className=\"text-sm font-medium text-gray-500\">Account Type</dt>\r\n                          <dd className=\"mt-1 text-sm text-gray-900 capitalize\">{state.user.role}</dd>\r\n                        </div>\r\n                        <div>\r\n                          <dt className=\"text-sm font-medium text-gray-500\">Member Since</dt>\r\n                          <dd className=\"mt-1 text-sm text-gray-900\">\r\n                            {new Date(state.user.createdAt || Date.now()).toLocaleDateString('en-KE')}\r\n                          </dd>\r\n                        </div>\r\n                      </dl>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Reports Tab */}\r\n            {activeTab === 'reports' && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">My Trip Reports</h3>\r\n                {reportsLoading ? (\r\n                  <div className=\"flex items-center justify-center py-8\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500\"></div>\r\n                  </div>\r\n                ) : reports.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <History className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                    <p className=\"text-gray-500 mb-4\">No reports submitted yet</p>\r\n                    <Link to=\"/report\" className=\"btn btn-primary\">\r\n                      Submit Your First Report\r\n                    </Link>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    {reports.map((report) => (\r\n                      <div key={report._id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center space-x-2 mb-2\">\r\n                              <MapPin className=\"w-4 h-4 text-gray-400\" />\r\n                              <span className=\"text-sm font-medium text-gray-900\">\r\n                                Route {report.routeId}\r\n                              </span>\r\n                              <span className={`px-2 py-1 text-xs rounded-full ${getSeverityColor(report.severity)}`}>\r\n                                {report.severity}\r\n                              </span>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-600 mb-2\">{report.description}</p>\r\n                            <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\r\n                              <div className=\"flex items-center\">\r\n                                <Clock className=\"w-3 h-3 mr-1\" />\r\n                                {formatDate(report.createdAt)}\r\n                              </div>\r\n                              <span className=\"capitalize\">Type: {report.reportType}</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Favorites Tab */}\r\n            {activeTab === 'favorites' && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Favorite Routes</h3>\r\n                {favoritesLoading ? (\r\n                  <div className=\"flex items-center justify-center py-8\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500\"></div>\r\n                  </div>\r\n                ) : favoriteRoutes.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <Heart className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                    <p className=\"text-gray-500 mb-4\">No favorite routes yet</p>\r\n                    <Link to=\"/map\" className=\"btn btn-primary\">\r\n                      Explore Routes\r\n                    </Link>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    {favoriteRoutes.map((route) => (\r\n                      <div key={route._id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">{route.name}</h4>\r\n                            <p className=\"text-sm text-gray-600\">{route.operator}</p>\r\n                            <p className=\"text-xs text-gray-500\">Route {route.routeNumber}</p>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Link\r\n                              to={`/map?route=${route._id}`}\r\n                              className=\"btn btn-ghost btn-sm\"\r\n                            >\r\n                              View\r\n                            </Link>\r\n                            <button\r\n                              onClick={() => removeFavorite(route._id)}\r\n                              className=\"btn btn-ghost btn-sm text-red-600 hover:text-red-700\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Analytics Tab */}\r\n            {activeTab === 'analytics' && (\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Your Analytics</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n                  <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center\">\r\n                      <History className=\"w-8 h-8 text-blue-600\" />\r\n                      <div className=\"ml-3\">\r\n                        <p className=\"text-sm font-medium text-blue-600\">Total Reports</p>\r\n                        <p className=\"text-2xl font-bold text-blue-900\">{analytics.totalReports}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-green-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center\">\r\n                      <Clock className=\"w-8 h-8 text-green-600\" />\r\n                      <div className=\"ml-3\">\r\n                        <p className=\"text-sm font-medium text-green-600\">This Month</p>\r\n                        <p className=\"text-2xl font-bold text-green-900\">{analytics.reportsThisMonth}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-purple-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center\">\r\n                      <Heart className=\"w-8 h-8 text-purple-600\" />\r\n                      <div className=\"ml-3\">\r\n                        <p className=\"text-sm font-medium text-purple-600\">Favorites</p>\r\n                        <p className=\"text-2xl font-bold text-purple-900\">{analytics.favoriteRoutesCount}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bg-yellow-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center\">\r\n                      <Star className=\"w-8 h-8 text-yellow-600\" />\r\n                      <div className=\"ml-3\">\r\n                        <p className=\"text-sm font-medium text-yellow-600\">Avg Rating</p>\r\n                        <p className=\"text-2xl font-bold text-yellow-900\">{analytics.averageRating.toFixed(1)}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {analytics.mostReportedRoute && (\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Most Reported Route</h4>\r\n                    <p className=\"text-sm text-gray-600\">{analytics.mostReportedRoute}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["Profile","state","setUser","useApp","activeTab","setActiveTab","useState","isEditing","setIsEditing","isLoading","setIsLoading","error","setError","success","setSuccess","profileData","setProfileData","_a","_b","reports","setReports","reportsLoading","setReportsLoading","favoriteRoutes","setFavoriteRoutes","favoritesLoading","setFavoritesLoading","analytics","setAnalytics","loadReports","useCallback","response","apiService","loadFavorites","loadAnalytics","useEffect","handleProfileUpdate","e","handleInputChange","name","value","prev","removeFavorite","routeId","route","formatDate","dateString","getSeverityColor","severity","jsxs","jsx","User","Edit3","History","Heart","BarChart3","tab","Icon","AlertTriangle","CheckCircle","Fragment","Save","X","Link","report","MapPin","Clock","Star"],"mappings":"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"}