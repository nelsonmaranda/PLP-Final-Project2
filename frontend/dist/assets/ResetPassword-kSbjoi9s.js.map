{"version":3,"file":"ResetPassword-kSbjoi9s.js","sources":["../../src/screens/ResetPassword.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { Lock, Check, AlertCircle, ArrowLeft } from 'lucide-react'\r\nimport { useTranslation } from '../hooks/useTranslation'\r\nimport apiService from '../services/api'\r\n\r\nexport default function ResetPassword() {\r\n  const { t } = useTranslation()\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  const [password, setPassword] = useState('')\r\n  const [confirm, setConfirm] = useState('')\r\n  const [status, setStatus] = useState<'idle'|'sending'|'success'|'error'>('idle')\r\n  const [message, setMessage] = useState('')\r\n  const [token, setToken] = useState('')\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search)\r\n    const t = params.get('token') || ''\r\n    setToken(t)\r\n  }, [location.search])\r\n\r\n  const submit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (password.length < 8 || password !== confirm) {\r\n      setStatus('error')\r\n      setMessage('Passwords must match and be at least 8 characters.')\r\n      return\r\n    }\r\n    setStatus('sending')\r\n    setMessage('')\r\n    try {\r\n      await apiService.resetPassword(token, password)\r\n      setStatus('success')\r\n      setMessage('Password reset successfully. Redirecting to loginâ€¦')\r\n      setTimeout(()=>navigate('/login'), 1500)\r\n    } catch (e: any) {\r\n      setStatus('error')\r\n      setMessage(e?.message || 'Failed to reset password. Try requesting a new link.')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"flex justify-center\">\r\n          <div className=\"w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center\">\r\n            <Lock className=\"w-6 h-6 text-white\" />\r\n          </div>\r\n        </div>\r\n        <h1 className=\"mt-6 text-center text-3xl font-bold text-gray-900\">{t('auth.resetPasswordTitle')}</h1>\r\n        <p className=\"mt-2 text-center text-sm text-gray-600\">{t('auth.resetPasswordSubtitle')}</p>\r\n      </div>\r\n\r\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"card\">\r\n          <div className=\"card-content\">\r\n            {status==='success' && (\r\n              <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\"><div className=\"flex items-center\"><Check className=\"h-5 w-5 text-green-500\" /><p className=\"ml-2 text-sm text-green-800\">{message}</p></div></div>\r\n            )}\r\n            {status==='error' && (\r\n              <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\"><div className=\"flex items-center\"><AlertCircle className=\"h-5 w-5 text-red-500\" /><p className=\"ml-2 text-sm text-red-800\">{message}</p></div></div>\r\n            )}\r\n            <form onSubmit={submit} className=\"space-y-6\">\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"password\">{t('auth.password')}</label>\r\n                <input id=\"password\" type=\"password\" className=\"form-input\" value={password} onChange={e=>setPassword(e.target.value)} minLength={8} required />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\" htmlFor=\"confirm\">{t('auth.confirmPassword')}</label>\r\n                <input id=\"confirm\" type=\"password\" className=\"form-input\" value={confirm} onChange={e=>setConfirm(e.target.value)} minLength={8} required />\r\n              </div>\r\n              <button type=\"submit\" className=\"btn btn-primary w-full\" disabled={status==='sending'}>{status==='sending' ? t('auth.resetting') : t('auth.resetPassword')}</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-6 text-center\">\r\n          <Link to=\"/login\" className=\"inline-flex items-center text-sm text-gray-600 hover:text-gray-900\"><ArrowLeft className=\"w-4 h-4 mr-2\" />Back to login</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n"],"names":["ResetPassword","t","useTranslation","location","useLocation","navigate","useNavigate","password","setPassword","useState","confirm","setConfirm","status","setStatus","message","setMessage","token","setToken","useEffect","submit","e","apiService","jsxs","jsx","Lock","Check","AlertCircle","Link","ArrowLeft"],"mappings":"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"}