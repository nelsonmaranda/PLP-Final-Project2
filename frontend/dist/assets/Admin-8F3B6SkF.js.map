{"version":3,"file":"Admin-8F3B6SkF.js","sources":["../../src/screens/Admin.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { BarChart3, Users, MapPin, AlertTriangle, Plus, Edit, Trash2, Eye, Upload, Loader2 } from 'lucide-react'\r\nimport { Link } from 'react-router-dom'\r\nimport apiService from '../services/api'\r\nimport { Route } from '../types'\r\nimport { useApp } from '../contexts/AppContext'\r\nimport { useTranslation } from '../hooks/useTranslation'\r\n\r\nexport default function Admin() {\r\n  const { t } = useTranslation()\r\n  const { state } = useApp()\r\n  const isAdmin = state.user?.role === 'admin'\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [routes, setRoutes] = useState<Route[]>([])\r\n  const [reportsCount, setReportsCount] = useState<number>(0)\r\n  const [showAddRoute, setShowAddRoute] = useState(false)\r\n  const [newRoute, setNewRoute] = useState({\r\n    name: '',\r\n    description: '',\r\n  })\r\n\r\n  // Seeding UI state\r\n  const [isSeeding, setIsSeeding] = useState(false)\r\n  const [seedResult, setSeedResult] = useState<string>('')\r\n\r\n  useEffect(() => {\r\n    const loadRoutes = async () => {\r\n      try {\r\n        setIsLoading(true)\r\n        const res = await apiService.getRoutes({ page: 1, limit: 100, sort: 'createdAt', order: 'desc' })\r\n        if (res.success && res.data) {\r\n          setRoutes(res.data.routes as any)\r\n        } else {\r\n          setRoutes([])\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to load routes', e)\r\n        setRoutes([])\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n    const loadReportsCount = async () => {\r\n      try {\r\n        const resp = await fetch('https://us-central1-smart-matwana-ke.cloudfunctions.net/api/reports/count')\r\n        const data = await resp.json()\r\n        if (data?.success && typeof data?.data?.count === 'number') {\r\n          setReportsCount(data.data.count)\r\n        }\r\n      } catch {}\r\n    }\r\n    loadRoutes()\r\n    loadReportsCount()\r\n  }, [])\r\n\r\n  const handleAddRoute = async () => {\r\n    try {\r\n      if (newRoute.name.trim()) {\r\n        setIsLoading(true)\r\n        const created = await apiService.createRoute({ name: newRoute.name, description: newRoute.description } as any)\r\n        if (created.success && created.data) {\r\n          const updated = await apiService.getRoutes({ page: 1, limit: 100, sort: 'createdAt', order: 'desc' })\r\n          setRoutes(updated.success && updated.data ? (updated.data.routes as any) : [])\r\n          setNewRoute({ name: '', description: '' })\r\n          setShowAddRoute(false)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to add route', e)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleDeleteRoute = async (id: string) => {\r\n    try {\r\n      setIsLoading(true)\r\n      await apiService.deleteRoute(id)\r\n      const updated = await apiService.getRoutes({ page: 1, limit: 100, sort: 'createdAt', order: 'desc' })\r\n      setRoutes(updated.success && updated.data ? (updated.data.routes as any) : [])\r\n    } catch (e) {\r\n      console.error('Failed to delete route', e)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleToggleStatus = async (id: string) => {\r\n    try {\r\n      setIsLoading(true)\r\n      const route = (routes as any).find((r: any) => (r as any)._id === id || (r as any).id === id)\r\n      if (!route) return\r\n      const next = (route as any).status === 'active' ? 'inactive' : 'active'\r\n      await apiService.updateRoute((route as any)._id || (route as any).id, { status: next } as any)\r\n      const updated = await apiService.getRoutes({ page: 1, limit: 100, sort: 'createdAt', order: 'desc' })\r\n      setRoutes(updated.success && updated.data ? (updated.data.routes as any) : [])\r\n    } catch (e) {\r\n      console.error('Failed to toggle route status', e)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const stats = [\r\n    {\r\n      title: 'Total Routes',\r\n      value: routes.length,\r\n      icon: MapPin,\r\n      color: 'text-blue-600',\r\n      bgColor: 'bg-blue-100'\r\n    },\r\n    {\r\n      title: 'Active Routes',\r\n      value: routes.length,\r\n      icon: BarChart3,\r\n      color: 'text-green-600',\r\n      bgColor: 'bg-green-100'\r\n    },\r\n    {\r\n      title: 'Total Reports',\r\n      value: reportsCount,\r\n      icon: Users,\r\n      color: 'text-purple-600',\r\n      bgColor: 'bg-purple-100'\r\n    },\r\n    {\r\n      title: 'Safety Issues',\r\n      value: (routes as any).reduce((sum: number, r: any) => sum + (r.safetyIssues || 0), 0),\r\n      icon: AlertTriangle,\r\n      color: 'text-red-600',\r\n      bgColor: 'bg-red-100'\r\n    }\r\n  ]\r\n\r\n  const runSeed = async () => {\r\n    setIsSeeding(true)\r\n    setSeedResult('')\r\n    try {\r\n      let seeds: any[] = []\r\n      try {\r\n        const res = await fetch('/scripts/seed-routes.json')\r\n        if (res.ok) {\r\n          seeds = await res.json()\r\n        }\r\n      } catch {}\r\n      if (!seeds || seeds.length === 0) {\r\n        seeds = [\r\n          { name: 'Route 46 - CBD to Westlands', routeNumber: '46' },\r\n          { name: 'Route 44 - CBD to Kasarani', routeNumber: '44' },\r\n          { name: 'Route 58 - CBD to Embakasi', routeNumber: '58' }\r\n        ]\r\n      }\r\n\r\n      const token = localStorage.getItem('authToken')\r\n      if (!token) {\r\n        setSeedResult('Missing auth token. Please login again.')\r\n        setIsSeeding(false)\r\n        return\r\n      }\r\n\r\n      let created = 0\r\n      for (let i = 0; i < seeds.length; i += 10) {\r\n        const chunk = seeds.slice(i, i + 10)\r\n        const resp = await fetch('https://us-central1-smart-matwana-ke.cloudfunctions.net/api/admin/seed/routes', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ routes: chunk })\r\n        })\r\n        const data = await resp.json()\r\n        if (data?.success && data?.data?.created >= 0) {\r\n          created += data.data.created\r\n          setSeedResult(prev => `${prev}\\nChunk ${i}-${i + chunk.length - 1}: created ${data.data.created}`)\r\n        } else {\r\n          setSeedResult(prev => `${prev}\\nChunk ${i}-${i + chunk.length - 1}: failed (${data?.message || 'unknown'})`)\r\n        }\r\n        await new Promise(r => setTimeout(r, 250))\r\n      }\r\n\r\n      const updated = await apiService.getRoutes({ page: 1, limit: 100, sort: 'createdAt', order: 'desc' })\r\n      setRoutes(updated.success && updated.data ? (updated.data.routes as any) : [])\r\n      setSeedResult(prev => `${prev}\\nTotal created: ${created}`)\r\n    } catch (e: any) {\r\n      setSeedResult(`Seed failed: ${e?.message || e}`)\r\n    } finally {\r\n      setIsSeeding(false)\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"loading-spinner mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">{t('admin.loading')}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"container py-6\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">{t('admin.title')}</h1>\r\n          <p className=\"text-gray-600 mt-2\">{t('admin.subtitle')}</p>\r\n        </div>\r\n\r\n        {isAdmin && (\r\n          <div className=\"card mb-6\">\r\n            <div className=\"card-header\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"card-title\">Seed Curated CBD Routes</h2>\r\n                <button onClick={runSeed} disabled={isSeeding} className=\"btn btn-primary btn-sm\">\r\n                  {isSeeding ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <Upload className=\"w-4 h-4 mr-2\" />}\r\n                  {isSeeding ? 'Seedingâ€¦' : 'Run Seed'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <p className=\"text-sm text-gray-600\">Seeds about 50 CBD routes in small chunks. Requires admin login.</p>\r\n              {seedResult && (\r\n                <pre className=\"mt-3 whitespace-pre-wrap text-xs bg-gray-50 p-3 rounded border border-gray-200\">{seedResult}</pre>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Quick Tools */}\r\n        {isAdmin && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n            <Link to=\"/admin/routes\" className=\"card hover:bg-gray-50\">\r\n              <div className=\"card-content\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"p-3 rounded-lg bg-indigo-100\">\r\n                    <MapPin className=\"w-6 h-6 text-indigo-600\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">Tools</p>\r\n                    <p className=\"text-lg font-semibold text-gray-900\">Route Editor</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          {stats.map((stat, index) => {\r\n            const Icon = stat.icon\r\n            return (\r\n              <div key={index} className=\"card\">\r\n                <div className=\"card-content\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className={`p-3 rounded-lg ${stat.bgColor}`}>\r\n                      <Icon className={`w-6 h-6 ${stat.color}`} />\r\n                    </div>\r\n                    <div className=\"ml-4\">\r\n                      <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{stat.value}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        {/* Routes Management */}\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <h2 className=\"card-title\">Route Management</h2>\r\n              <button\r\n                onClick={() => setShowAddRoute(true)}\r\n                className=\"btn btn-primary btn-sm\"\r\n              >\r\n                <Plus className=\"w-4 h-4 mr-2\" />\r\n                Add Route\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card-content p-0\">\r\n            {/* Add Route Form */}\r\n            {showAddRoute && (\r\n              <div className=\"border-b border-gray-200 p-6 bg-gray-50\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Add New Route</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Route Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newRoute.name}\r\n                      onChange={(e) => setNewRoute(prev => ({ ...prev, name: e.target.value }))}\r\n                      className=\"form-input\"\r\n                      placeholder=\"e.g., Route 42 - Thika Road\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">Description</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newRoute.description}\r\n                      onChange={(e) => setNewRoute(prev => ({ ...prev, description: e.target.value }))}\r\n                      className=\"form-input\"\r\n                      placeholder=\"Route description\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex justify-end space-x-3 mt-4\">\r\n                  <button\r\n                    onClick={() => setShowAddRoute(false)}\r\n                    className=\"btn btn-outline\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleAddRoute}\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    Add Route\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Routes Table */}\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Route\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Reliability\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Safety\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Reports\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {routes.map((route: any) => (\r\n                    <tr key={route._id || route.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">{route.name}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"text-sm text-gray-900\">{route.score?.reliability ?? '-'}</div>\r\n                          <div className=\"ml-2 w-16 bg-gray-200 rounded-full h-2\">\r\n                            <div \r\n                              className=\"bg-blue-600 h-2 rounded-full\" \r\n                              style={{ width: `${((route.score?.reliability ?? 0) / 5) * 100}%` }}\r\n                            ></div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"text-sm text-gray-900\">{route.score?.safety ?? '-'}</div>\r\n                          <div className=\"ml-2 w-16 bg-gray-200 rounded-full h-2\">\r\n                            <div \r\n                              className=\"bg-green-600 h-2 rounded-full\" \r\n                              style={{ width: `${((route.score?.safety ?? 0) / 5) * 100}%` }}\r\n                            ></div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {route.reportsCount ?? 0}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                          (route.status || 'active') === 'active' \r\n                            ? 'bg-green-100 text-green-800'\r\n                            : (route.status || 'inactive') === 'maintenance'\r\n                            ? 'bg-yellow-100 text-yellow-800'\r\n                            : 'bg-red-100 text-red-800'\r\n                        }`}>\r\n                          {route.status || 'active'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        <div className=\"flex space-x-2\">\r\n                          <button className=\"text-blue-600 hover:text-blue-900\">\r\n                            <Eye className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button className=\"text-gray-600 hover:text-gray-900\">\r\n                            <Edit className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button \r\n                            onClick={() => handleToggleStatus(route._id || route.id)}\r\n                            className=\"text-green-600 hover:text-green-900\"\r\n                          >\r\n                            {(route.status || 'active') === 'active' ? 'Deactivate' : 'Activate'}\r\n                          </button>\r\n                          <button \r\n                            onClick={() => handleDeleteRoute(route._id || route.id)}\r\n                            className=\"text-red-600 hover:text-red-900\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["Admin","t","useTranslation","state","useApp","isAdmin","_a","isLoading","setIsLoading","useState","routes","setRoutes","reportsCount","setReportsCount","showAddRoute","setShowAddRoute","newRoute","setNewRoute","isSeeding","setIsSeeding","seedResult","setSeedResult","useEffect","loadRoutes","res","apiService","e","loadReportsCount","data","handleAddRoute","created","updated","handleDeleteRoute","id","handleToggleStatus","route","next","stats","MapPin","BarChart3","Users","sum","r","AlertTriangle","runSeed","seeds","token","i","chunk","prev","jsxs","jsx","Loader2","Upload","Link","stat","index","Icon","Plus","_b","_c","_d","Eye","Edit","Trash2"],"mappings":"sPAQA,SAAwBA,GAAQ,OAC9B,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZC,IAAUC,EAAAH,EAAM,OAAN,YAAAG,EAAY,QAAS,QAC/B,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,EAAI,EACzC,CAACC,EAAQC,CAAS,EAAIF,EAAAA,SAAkB,CAAA,CAAE,EAC1C,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAiB,CAAC,EACpD,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAK,EAChD,CAACO,EAAUC,CAAW,EAAIR,WAAS,CACvC,KAAM,GACN,YAAa,EAAA,CACd,EAGK,CAACS,EAAWC,CAAY,EAAIV,EAAAA,SAAS,EAAK,EAC1C,CAACW,EAAYC,CAAa,EAAIZ,EAAAA,SAAiB,EAAE,EAEvDa,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAa,SAAY,CAC7B,GAAI,CACFf,EAAa,EAAI,EACjB,MAAMgB,EAAM,MAAMC,EAAW,UAAU,CAAE,KAAM,EAAG,MAAO,IAAK,KAAM,YAAa,MAAO,OAAQ,EAC5FD,EAAI,SAAWA,EAAI,KACrBb,EAAUa,EAAI,KAAK,MAAa,EAEhCb,EAAU,CAAA,CAAE,CAEhB,OAASe,EAAG,CACV,QAAQ,MAAM,wBAAyBA,CAAC,EACxCf,EAAU,CAAA,CAAE,CACd,QAAA,CACEH,EAAa,EAAK,CACpB,CACF,EACMmB,EAAmB,SAAY,OACnC,GAAI,CAEF,MAAMC,EAAO,MADA,MAAM,MAAM,2EAA2E,GAC5E,KAAA,EACpBA,GAAA,MAAAA,EAAM,SAAW,QAAOtB,EAAAsB,GAAA,YAAAA,EAAM,OAAN,YAAAtB,EAAY,QAAU,UAChDO,EAAgBe,EAAK,KAAK,KAAK,CAEnC,MAAQ,CAAC,CACX,EACAL,EAAA,EACAI,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAME,EAAiB,SAAY,CACjC,GAAI,CACF,GAAIb,EAAS,KAAK,OAAQ,CACxBR,EAAa,EAAI,EACjB,MAAMsB,EAAU,MAAML,EAAW,YAAY,CAAE,KAAMT,EAAS,KAAM,YAAaA,EAAS,WAAA,CAAoB,EAC9G,GAAIc,EAAQ,SAAWA,EAAQ,KAAM,CACnC,MAAMC,EAAU,MAAMN,EAAW,UAAU,CAAE,KAAM,EAAG,MAAO,IAAK,KAAM,YAAa,MAAO,OAAQ,EACpGd,EAAUoB,EAAQ,SAAWA,EAAQ,KAAQA,EAAQ,KAAK,OAAiB,EAAE,EAC7Ed,EAAY,CAAE,KAAM,GAAI,YAAa,GAAI,EACzCF,EAAgB,EAAK,CACvB,CACF,CACF,OAASW,EAAG,CACV,QAAQ,MAAM,sBAAuBA,CAAC,CACxC,QAAA,CACElB,EAAa,EAAK,CACpB,CACF,EAEMwB,EAAoB,MAAOC,GAAe,CAC9C,GAAI,CACFzB,EAAa,EAAI,EACjB,MAAMiB,EAAW,YAAYQ,CAAE,EAC/B,MAAMF,EAAU,MAAMN,EAAW,UAAU,CAAE,KAAM,EAAG,MAAO,IAAK,KAAM,YAAa,MAAO,OAAQ,EACpGd,EAAUoB,EAAQ,SAAWA,EAAQ,KAAQA,EAAQ,KAAK,OAAiB,EAAE,CAC/E,OAASL,EAAG,CACV,QAAQ,MAAM,yBAA0BA,CAAC,CAC3C,QAAA,CACElB,EAAa,EAAK,CACpB,CACF,EAEM0B,EAAqB,MAAOD,GAAe,CAC/C,GAAI,CACFzB,EAAa,EAAI,EACjB,MAAM2B,EAASzB,EAAe,KAAM,GAAY,EAAU,MAAQuB,GAAO,EAAU,KAAOA,CAAE,EAC5F,GAAI,CAACE,EAAO,OACZ,MAAMC,EAAQD,EAAc,SAAW,SAAW,WAAa,SAC/D,MAAMV,EAAW,YAAaU,EAAc,KAAQA,EAAc,GAAI,CAAE,OAAQC,EAAa,EAC7F,MAAML,EAAU,MAAMN,EAAW,UAAU,CAAE,KAAM,EAAG,MAAO,IAAK,KAAM,YAAa,MAAO,OAAQ,EACpGd,EAAUoB,EAAQ,SAAWA,EAAQ,KAAQA,EAAQ,KAAK,OAAiB,EAAE,CAC/E,OAASL,EAAG,CACV,QAAQ,MAAM,gCAAiCA,CAAC,CAClD,QAAA,CACElB,EAAa,EAAK,CACpB,CACF,EAEM6B,EAAQ,CACZ,CACE,MAAO,eACP,MAAO3B,EAAO,OACd,KAAM4B,EACN,MAAO,gBACP,QAAS,aAAA,EAEX,CACE,MAAO,gBACP,MAAO5B,EAAO,OACd,KAAM6B,EACN,MAAO,iBACP,QAAS,cAAA,EAEX,CACE,MAAO,gBACP,MAAO3B,EACP,KAAM4B,EACN,MAAO,kBACP,QAAS,eAAA,EAEX,CACE,MAAO,gBACP,MAAQ9B,EAAe,OAAO,CAAC+B,EAAaC,IAAWD,GAAOC,EAAE,cAAgB,GAAI,CAAC,EACrF,KAAMC,EACN,MAAO,eACP,QAAS,YAAA,CACX,EAGIC,EAAU,SAAY,OAC1BzB,EAAa,EAAI,EACjBE,EAAc,EAAE,EAChB,GAAI,CACF,IAAIwB,EAAe,CAAA,EACnB,GAAI,CACF,MAAMrB,EAAM,MAAM,MAAM,2BAA2B,EAC/CA,EAAI,KACNqB,EAAQ,MAAMrB,EAAI,KAAA,EAEtB,MAAQ,CAAC,EACL,CAACqB,GAASA,EAAM,SAAW,KAC7BA,EAAQ,CACN,CAAE,KAAM,8BAA+B,YAAa,IAAA,EACpD,CAAE,KAAM,6BAA8B,YAAa,IAAA,EACnD,CAAE,KAAM,6BAA8B,YAAa,IAAA,CAAK,GAI5D,MAAMC,EAAQ,aAAa,QAAQ,WAAW,EAC9C,GAAI,CAACA,EAAO,CACVzB,EAAc,yCAAyC,EACvDF,EAAa,EAAK,EAClB,MACF,CAEA,IAAIW,EAAU,EACd,QAASiB,EAAI,EAAGA,EAAIF,EAAM,OAAQE,GAAK,GAAI,CACzC,MAAMC,EAAQH,EAAM,MAAME,EAAGA,EAAI,EAAE,EAS7BnB,EAAO,MARA,MAAM,MAAM,gFAAiF,CACxG,OAAQ,OACR,QAAS,CACP,cAAiB,UAAUkB,CAAK,GAChC,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAU,CAAE,OAAQE,EAAO,CAAA,CACvC,GACuB,KAAA,EACpBpB,GAAA,MAAAA,EAAM,WAAWtB,EAAAsB,GAAA,YAAAA,EAAM,OAAN,YAAAtB,EAAY,UAAW,GAC1CwB,GAAWF,EAAK,KAAK,QACrBP,EAAc4B,GAAQ,GAAGA,CAAI;AAAA,QAAWF,CAAC,IAAIA,EAAIC,EAAM,OAAS,CAAC,aAAapB,EAAK,KAAK,OAAO,EAAE,GAEjGP,EAAc4B,GAAQ,GAAGA,CAAI;AAAA,QAAWF,CAAC,IAAIA,EAAIC,EAAM,OAAS,CAAC,cAAapB,GAAA,YAAAA,EAAM,UAAW,SAAS,GAAG,EAE7G,MAAM,IAAI,QAAQc,GAAK,WAAWA,EAAG,GAAG,CAAC,CAC3C,CAEA,MAAMX,EAAU,MAAMN,EAAW,UAAU,CAAE,KAAM,EAAG,MAAO,IAAK,KAAM,YAAa,MAAO,OAAQ,EACpGd,EAAUoB,EAAQ,SAAWA,EAAQ,KAAQA,EAAQ,KAAK,OAAiB,EAAE,EAC7EV,EAAc4B,GAAQ,GAAGA,CAAI;AAAA,iBAAoBnB,CAAO,EAAE,CAC5D,OAASJ,EAAQ,CACfL,EAAc,iBAAgBK,GAAA,YAAAA,EAAG,UAAWA,CAAC,EAAE,CACjD,QAAA,CACEP,EAAa,EAAK,CACpB,CACF,EAEA,OAAIZ,QAEC,MAAA,CAAI,UAAU,gDACb,SAAA2C,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAAA,CAA+B,QAC7C,IAAA,CAAE,UAAU,gBAAiB,SAAAlD,EAAE,eAAe,CAAA,CAAE,CAAA,CAAA,CACnD,CAAA,CACF,QAKD,MAAA,CAAI,UAAU,0BACb,SAAAiD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAlD,EAAE,aAAa,EAAE,QAClE,IAAA,CAAE,UAAU,qBAAsB,SAAAA,EAAE,gBAAgB,CAAA,CAAE,CAAA,EACzD,EAECI,GACC6C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,cACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,aAAa,SAAA,0BAAuB,SACjD,SAAA,CAAO,QAASP,EAAS,SAAU1B,EAAW,UAAU,yBACtD,SAAA,CAAAA,EAAYiC,EAAAA,IAACC,GAAQ,UAAU,2BAAA,CAA4B,EAAKD,EAAAA,IAACE,EAAA,CAAO,UAAU,cAAA,CAAe,EACjGnC,EAAY,WAAa,UAAA,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,CACF,EACAgC,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mEAAgE,EACpG/B,GACC+B,EAAAA,IAAC,MAAA,CAAI,UAAU,iFAAkF,SAAA/B,CAAA,CAAW,CAAA,CAAA,CAEhH,CAAA,EACF,EAIDf,GACC8C,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACb,SAAAA,EAAAA,IAACG,GAAK,GAAG,gBAAgB,UAAU,wBACjC,eAAC,MAAA,CAAI,UAAU,eACb,SAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+BACb,eAACb,EAAA,CAAO,UAAU,0BAA0B,CAAA,CAC9C,EACAY,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,QAAK,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAsC,SAAA,cAAA,CAAY,CAAA,CAAA,CACjE,CAAA,EACF,CAAA,CACF,EACF,EACF,EAGFA,MAAC,OAAI,UAAU,4DACZ,WAAM,IAAI,CAACI,EAAMC,IAAU,CAC1B,MAAMC,EAAOF,EAAK,KAClB,OACEJ,EAAAA,IAAC,MAAA,CAAgB,UAAU,OACzB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,eACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAW,kBAAkBI,EAAK,OAAO,GAC5C,SAAAJ,EAAAA,IAACM,EAAA,CAAK,UAAW,WAAWF,EAAK,KAAK,GAAI,EAC5C,EACAL,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,SAAAI,EAAK,MAAM,EAC7DJ,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,WAAK,KAAA,CAAM,CAAA,CAAA,CAC9D,CAAA,EACF,CAAA,CACF,GAXQK,CAYV,CAEJ,CAAC,CAAA,CACH,EAGAN,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,cACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,aAAa,SAAA,mBAAgB,EAC3CD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMnC,EAAgB,EAAI,EACnC,UAAU,yBAEV,SAAA,CAAAoC,EAAAA,IAACO,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,WAAA,CAAA,CAAA,CAEnC,CAAA,CACF,CAAA,CACF,EAEAR,EAAAA,KAAC,MAAA,CAAI,UAAU,mBAEZ,SAAA,CAAApC,GACCoC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,gBAAa,EACpED,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,aAAU,EACxCA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOnC,EAAS,KAChB,SAAWU,GAAMT,EAAYgC,IAAS,CAAE,GAAGA,EAAM,KAAMvB,EAAE,OAAO,KAAA,EAAQ,EACxE,UAAU,aACV,YAAY,6BAAA,CAAA,CACd,EACF,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,cAAW,EACzCA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOnC,EAAS,YAChB,SAAWU,GAAMT,EAAYgC,IAAS,CAAE,GAAGA,EAAM,YAAavB,EAAE,OAAO,KAAA,EAAQ,EAC/E,UAAU,aACV,YAAY,mBAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMpC,EAAgB,EAAK,EACpC,UAAU,kBACX,SAAA,QAAA,CAAA,EAGDoC,EAAAA,IAAC,SAAA,CACC,QAAStB,EACT,UAAU,kBACX,SAAA,WAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,QAID,MAAA,CAAI,UAAU,kBACb,SAAAqB,EAAAA,KAAC,QAAA,CAAM,UAAU,sCACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,aACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,QAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,cAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,UAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAE/F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,iFAAiF,SAAA,SAAA,CAE/F,CAAA,CAAA,CACF,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CAAM,UAAU,oCACd,SAAAzC,EAAO,IAAKyB,GAAA,aACXe,OAAAA,EAAAA,KAAC,KAAA,CAA+B,UAAU,mBACxC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BACZ,SAAAA,EAAAA,IAAC,OAAI,UAAU,oCAAqC,SAAAhB,EAAM,IAAA,CAAK,CAAA,CACjE,QACC,KAAA,CAAG,UAAU,8BACZ,SAAAe,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,MAAC,OAAI,UAAU,wBAAyB,WAAA7C,EAAA6B,EAAM,QAAN,YAAA7B,EAAa,cAAe,IAAI,EACxE6C,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,+BACV,MAAO,CAAE,MAAO,MAAKQ,EAAAxB,EAAM,QAAN,YAAAwB,EAAa,cAAe,GAAK,EAAK,GAAG,GAAA,CAAI,CAAA,CACnE,CACH,CAAA,CAAA,CACF,CAAA,CACF,QACC,KAAA,CAAG,UAAU,8BACZ,SAAAT,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,MAAC,OAAI,UAAU,wBAAyB,WAAAS,EAAAzB,EAAM,QAAN,YAAAyB,EAAa,SAAU,IAAI,EACnET,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,gCACV,MAAO,CAAE,MAAO,MAAKU,EAAA1B,EAAM,QAAN,YAAA0B,EAAa,SAAU,GAAK,EAAK,GAAG,GAAA,CAAI,CAAA,CAC9D,CACH,CAAA,CAAA,CACF,CAAA,CACF,QACC,KAAA,CAAG,UAAU,oDACX,SAAA1B,EAAM,cAAgB,EACzB,EACAgB,EAAAA,IAAC,MAAG,UAAU,8BACZ,eAAC,OAAA,CAAK,UAAW,6DACdhB,EAAM,QAAU,YAAc,SAC3B,+BACCA,EAAM,QAAU,cAAgB,cACjC,gCACA,yBACN,GACG,SAAAA,EAAM,QAAU,QAAA,CACnB,CAAA,CACF,QACC,KAAA,CAAG,UAAU,kDACZ,SAAAe,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,UAAU,oCAChB,eAACW,EAAA,CAAI,UAAU,UAAU,CAAA,CAC3B,EACAX,EAAAA,IAAC,UAAO,UAAU,oCAChB,eAACY,EAAA,CAAK,UAAU,UAAU,CAAA,CAC5B,EACAZ,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMjB,EAAmBC,EAAM,KAAOA,EAAM,EAAE,EACvD,UAAU,sCAER,UAAAA,EAAM,QAAU,YAAc,SAAW,aAAe,UAAA,CAAA,EAE5DgB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMnB,EAAkBG,EAAM,KAAOA,EAAM,EAAE,EACtD,UAAU,kCAEV,SAAAgB,EAAAA,IAACa,EAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CACF,CAAA,CAAA,EA7DO7B,EAAM,KAAOA,EAAM,EA8D5B,EACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}