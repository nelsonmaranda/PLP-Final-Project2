import{a as T,j as e}from"./index-N0cMQqFc.js";import{r as a}from"./vendor-BKU87Gzz.js";import{R as N,B as M,M as f,c as v,$ as L,a0 as w,Q as $,l as p,T as b}from"./icons-B_aqzpWL.js";import"./router-Z6rqMkFf.js";function I(){const[r,S]=a.useState("overview"),[R,g]=a.useState(!0),[d,x]=a.useState([]),[i,m]=a.useState([]),[k,o]=a.useState([]),[t,h]=a.useState(null),[j,D]=a.useState("30d"),[c,C]=a.useState("all");a.useEffect(()=>{u()},[j,c]);const u=async()=>{try{g(!0);const s=await T.getSaccoDashboard();if(s.success&&s.data){const{routePerformance:l,driverPerformance:n,customerFeedback:A,fleetStatus:F}=s.data;x(l||[]),m(n||[]),o(A||[]),h(F||null)}else x([]),m([]),o([]),h(null)}catch(s){console.error("Error loading dashboard data:",s),x([]),m([]),o([]),h(null)}finally{g(!1)}},y=s=>{switch(s){case"active":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"suspended":return"text-red-600 bg-red-100";case"resolved":return"text-green-600 bg-green-100";case"in_progress":return"text-blue-600 bg-blue-100";case"pending":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},P=s=>{switch(s){case"up":return e.jsx(b,{className:"w-4 h-4 text-green-500"});case"down":return e.jsx(b,{className:"w-4 h-4 text-red-500 rotate-180"});default:return e.jsx(w,{className:"w-4 h-4 text-gray-500"})}};return R?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading SACCO Dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SACCO Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your fleet, drivers, and routes"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:j,onChange:s=>D(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:M},{id:"routes",name:"Route Performance",icon:f},{id:"drivers",name:"Driver Management",icon:v},{id:"feedback",name:"Customer Feedback",icon:L},{id:"fleet",name:"Fleet Management",icon:w}].map(s=>e.jsxs("button",{onClick:()=>S(s.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${r===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{children:s.name})]},s.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Routes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Drivers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx($,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["KSh ",d.reduce((s,l)=>s+(l.revenue||0),0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length>0?(i.reduce((s,l)=>s+(l.customerRating||0),0)/i.length).toFixed(1):"0.0"})]})]})})]}),t&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fleet Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.activeVehicles}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Vehicles"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["of ",t.totalVehicles," total"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:t.maintenanceDue}),e.jsx("p",{className:"text-sm text-gray-600",children:"Maintenance Due"}),e.jsx("p",{className:"text-xs text-gray-500",children:"vehicles need service"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[t.utilizationRate,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Utilization Rate"}),e.jsx("p",{className:"text-xs text-gray-500",children:"average fleet usage"})]})]})]})]}),r==="routes"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Route Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efficiency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passengers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"On-Time %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Safety"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trend"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.routeNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:s.routeName})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.efficiencyScore}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.efficiencyScore,"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KSh ",(s.revenue||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.passengerCount}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.onTimePercentage,"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.safetyScore,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(s.trend)})]},s.routeId))})]})})]}),r==="drivers"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Driver Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Safety Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"On-Time %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Incidents"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Routes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.driverName})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.safetyScore}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.safetyScore,"%"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.onTimePercentage,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-sm text-gray-900",children:s.customerRating})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.incidentCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.routes.join(", ")})]},s.driverId))})]})})]}),r==="feedback"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Feedback"}),e.jsxs("select",{value:c,onChange:s=>C(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:k.filter(s=>c==="all"||s.status===c).map(s=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.routeName}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((l,n)=>e.jsx(p,{className:`w-4 h-4 ${n<s.rating?"text-yellow-400 fill-current":"text-gray-300"}`},n))})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.comment}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{className:"capitalize",children:s.category}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),s.responseTime&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Resolved in ",s.responseTime," days"]})]})]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(s.status)}`,children:s.status})]})},s.id))})]})}),r==="fleet"&&t&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fleet Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Vehicles"}),e.jsx("span",{className:"text-lg font-semibold",children:t.totalVehicles})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Vehicles"}),e.jsx("span",{className:"text-lg font-semibold text-green-600",children:t.activeVehicles})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Maintenance Due"}),e.jsx("span",{className:"text-lg font-semibold text-yellow-600",children:t.maintenanceDue})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Age"}),e.jsxs("span",{className:"text-lg font-semibold",children:[t.averageAge," years"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Utilization Rate"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-gray-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),e.jsx("path",{className:"text-blue-600",stroke:"currentColor",strokeWidth:"3",fill:"none",strokeDasharray:`${t.utilizationRate}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[t.utilizationRate,"%"]})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fleet Utilization"})]})]})]})})]})]})}export{I as default};
//# sourceMappingURL=SaccoDashboard-D3ya-bGy.js.map
