const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-BY794BFf.js","assets/vendor-BKU87Gzz.js","assets/router-Z6rqMkFf.js","assets/icons-V--AQo_U.js","assets/MapView-C9Vjfkzg.js","assets/leaflet-DyOFlehG.js","assets/MapView-Dgihpmma.css","assets/ReportForm-BG3KLKJz.js","assets/Login-Dk8gCJil.js","assets/Signup-Bv1-dPX6.js","assets/Profile-BlIhKsQU.js","assets/Admin-Dkh7Mg6H.js","assets/AnalyticsDashboard-DJiifHZU.js","assets/SaccoDashboard-BuAdvtDB.js","assets/AuthorityDashboard-GcRlN6Xb.js"])))=>i.map(i=>d[i]);
var Fs=Object.defineProperty;var sr=t=>{throw TypeError(t)};var Is=(t,e,r)=>e in t?Fs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var B=(t,e,r)=>Is(t,typeof e!="symbol"?e+"":e,r),Tt=(t,e,r)=>e.has(t)||sr("Cannot "+r);var h=(t,e,r)=>(Tt(t,e,"read from private field"),r?r.call(t):e.get(t)),j=(t,e,r)=>e.has(t)?sr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),R=(t,e,r,s)=>(Tt(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),D=(t,e,r)=>(Tt(t,e,"access private method"),r);var nt=(t,e,r,s)=>({set _(n){R(t,e,n,r)},get _(){return h(t,e,s)}});import{r as O,b as _s,a as Qr}from"./vendor-BKU87Gzz.js";import{u as Kt,L as ge,N as nr,R as ks,a as X,B as Ds}from"./router-Z6rqMkFf.js";import{U as le,L as Kr,M as Pe,B as Vr,X as Gr,a as Jr,C as Ls,H as Wr,T as ze,S as ar,G as at,b as it,c as ot,d as ct,e as lt,f as ir,g as Us,h as or,P as Ms,A as qs,R as Hs,i as Bs}from"./icons-V--AQo_U.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var Xr={exports:{}},wt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=O,zs=Symbol.for("react.element"),Qs=Symbol.for("react.fragment"),Ks=Object.prototype.hasOwnProperty,Vs=$s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gs={key:!0,ref:!0,__self:!0,__source:!0};function Zr(t,e,r){var s,n={},a=null,i=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)Ks.call(e,s)&&!Gs.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:zs,type:t,key:a,ref:i,props:n,_owner:Vs.current}}wt.Fragment=Qs;wt.jsx=Zr;wt.jsxs=Zr;Xr.exports=wt;var o=Xr.exports,_t={},cr=_s;_t.createRoot=cr.createRoot,_t.hydrateRoot=cr.hydrateRoot;var bt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Js={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ue,Qt,Dr,Ws=(Dr=class{constructor(){j(this,ue,Js);j(this,Qt,!1)}setTimeoutProvider(t){R(this,ue,t)}setTimeout(t,e){return h(this,ue).setTimeout(t,e)}clearTimeout(t){h(this,ue).clearTimeout(t)}setInterval(t,e){return h(this,ue).setInterval(t,e)}clearInterval(t){h(this,ue).clearInterval(t)}},ue=new WeakMap,Qt=new WeakMap,Dr),kt=new Ws;function Xs(t){setTimeout(t,0)}var Et=typeof window>"u"||"Deno"in globalThis;function z(){}function Zs(t,e){return typeof t=="function"?t(e):t}function Ys(t){return typeof t=="number"&&t>=0&&t!==1/0}function en(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Dt(t,e){return typeof t=="function"?t(e):t}function tn(t,e){return typeof t=="function"?t(e):t}function lr(t,e){const{type:r="all",exact:s,fetchStatus:n,predicate:a,queryKey:i,stale:c}=t;if(i){if(s){if(e.queryHash!==Vt(i,e.options))return!1}else if(!Ge(e.queryKey,i))return!1}if(r!=="all"){const p=e.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||a&&!a(e))}function ur(t,e){const{exact:r,status:s,predicate:n,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(Ve(e.options.mutationKey)!==Ve(a))return!1}else if(!Ge(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Vt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ve)(t)}function Ve(t){return JSON.stringify(t,(e,r)=>Lt(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function Ge(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ge(t[r],e[r])):!1}var rn=Object.prototype.hasOwnProperty;function Yr(t,e){if(t===e)return t;const r=hr(t)&&hr(e);if(!r&&!(Lt(t)&&Lt(e)))return e;const n=(r?t:Object.keys(t)).length,a=r?e:Object.keys(e),i=a.length,c=r?new Array(i):{};let p=0;for(let d=0;d<i;d++){const l=r?d:a[d],y=t[l],b=e[l];if(y===b){c[l]=y,(r?d<n:rn.call(t,l))&&p++;continue}if(y===null||b===null||typeof y!="object"||typeof b!="object"){c[l]=b;continue}const w=Yr(y,b);c[l]=w,w===y&&p++}return n===i&&p===n?t:c}function hr(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lt(t){if(!dr(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!dr(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function dr(t){return Object.prototype.toString.call(t)==="[object Object]"}function sn(t){return new Promise(e=>{kt.setTimeout(e,t)})}function nn(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Yr(t,e):e}function an(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function on(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var Gt=Symbol();function es(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Se,he,Fe,Lr,cn=(Lr=class extends bt{constructor(){super();j(this,Se);j(this,he);j(this,Fe);R(this,Fe,r=>{if(!Et&&window.addEventListener){const s=()=>r();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){h(this,he)||this.setEventListener(h(this,Fe))}onUnsubscribe(){var r;this.hasListeners()||((r=h(this,he))==null||r.call(this),R(this,he,void 0))}setEventListener(r){var s;R(this,Fe,r),(s=h(this,he))==null||s.call(this),R(this,he,r(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(r){h(this,Se)!==r&&(R(this,Se,r),this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(s=>{s(r)})}isFocused(){var r;return typeof h(this,Se)=="boolean"?h(this,Se):((r=globalThis.document)==null?void 0:r.visibilityState)!=="hidden"}},Se=new WeakMap,he=new WeakMap,Fe=new WeakMap,Lr),ts=new cn;function ln(){let t,e;const r=new Promise((n,a)=>{t=n,e=a});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),t(n)},r.reject=n=>{s({status:"rejected",reason:n}),e(n)},r}var un=Xs;function hn(){let t=[],e=0,r=c=>{c()},s=c=>{c()},n=un;const a=c=>{e?t.push(c):n(()=>{r(c)})},i=()=>{const c=t;t=[],c.length&&n(()=>{s(()=>{c.forEach(p=>{r(p)})})})};return{batch:c=>{let p;e++;try{p=c()}finally{e--,e||i()}return p},batchCalls:c=>(...p)=>{a(()=>{c(...p)})},schedule:a,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{n=c}}}var M=hn(),Ie,de,_e,Ur,dn=(Ur=class extends bt{constructor(){super();j(this,Ie,!0);j(this,de);j(this,_e);R(this,_e,e=>{if(!Et&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){h(this,de)||this.setEventListener(h(this,_e))}onUnsubscribe(){var e;this.hasListeners()||((e=h(this,de))==null||e.call(this),R(this,de,void 0))}setEventListener(e){var r;R(this,_e,e),(r=h(this,de))==null||r.call(this),R(this,de,e(this.setOnline.bind(this)))}setOnline(e){h(this,Ie)!==e&&(R(this,Ie,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return h(this,Ie)}},Ie=new WeakMap,de=new WeakMap,_e=new WeakMap,Ur),mt=new dn;function fn(t){return Math.min(1e3*2**t,3e4)}function rs(t){return(t??"online")==="online"?mt.isOnline():!0}var Ut=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ss(t){let e=!1,r=0,s;const n=ln(),a=()=>n.status!=="pending",i=m=>{var g;if(!a()){const S=new Ut(m);b(S),(g=t.onCancel)==null||g.call(t,S)}},c=()=>{e=!0},p=()=>{e=!1},d=()=>ts.isFocused()&&(t.networkMode==="always"||mt.isOnline())&&t.canRun(),l=()=>rs(t.networkMode)&&t.canRun(),y=m=>{a()||(s==null||s(),n.resolve(m))},b=m=>{a()||(s==null||s(),n.reject(m))},w=()=>new Promise(m=>{var g;s=S=>{(a()||d())&&m(S)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;s=void 0,a()||(m=t.onContinue)==null||m.call(t)}),f=()=>{if(a())return;let m;const g=r===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(S){m=Promise.reject(S)}Promise.resolve(m).then(y).catch(S=>{var I;if(a())return;const v=t.retry??(Et?0:3),E=t.retryDelay??fn,x=typeof E=="function"?E(r,S):E,A=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,S);if(e||!A){b(S);return}r++,(I=t.onFail)==null||I.call(t,r,S),sn(x).then(()=>d()?void 0:w()).then(()=>{e?b(S):f()})})};return{promise:n,status:()=>n.status,cancel:i,continue:()=>(s==null||s(),n),cancelRetry:c,continueRetry:p,canStart:l,start:()=>(l()?f():w().then(f),n)}}var ve,Mr,ns=(Mr=class{constructor(){j(this,ve)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ys(this.gcTime)&&R(this,ve,kt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Et?1/0:5*60*1e3))}clearGcTimeout(){h(this,ve)&&(kt.clearTimeout(h(this,ve)),R(this,ve,void 0))}},ve=new WeakMap,Mr),Re,ke,$,Ne,_,Je,je,Q,se,qr,pn=(qr=class extends ns{constructor(e){super();j(this,Q);j(this,Re);j(this,ke);j(this,$);j(this,Ne);j(this,_);j(this,Je);j(this,je);R(this,je,!1),R(this,Je,e.defaultOptions),this.setOptions(e.options),this.observers=[],R(this,Ne,e.client),R(this,$,h(this,Ne).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,R(this,Re,fr(this.options)),this.state=e.state??h(this,Re),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=h(this,_))==null?void 0:e.promise}setOptions(e){if(this.options={...h(this,Je),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=fr(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),R(this,Re,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&h(this,$).remove(this)}setData(e,r){const s=nn(this.state.data,e,this.options);return D(this,Q,se).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){D(this,Q,se).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,n;const r=(s=h(this,_))==null?void 0:s.promise;return(n=h(this,_))==null||n.cancel(e),r?r.then(z).catch(z):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(h(this,Re))}isActive(){return this.observers.some(e=>tn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Dt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!en(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=h(this,_))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=h(this,_))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),h(this,$).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(h(this,_)&&(h(this,je)?h(this,_).cancel({revert:!0}):h(this,_).cancelRetry()),this.scheduleGc()),h(this,$).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,Q,se).call(this,{type:"invalidate"})}async fetch(e,r){var p,d,l,y,b,w,f,m,g,S,v,E;if(this.state.fetchStatus!=="idle"&&((p=h(this,_))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(h(this,_))return h(this,_).continueRetry(),h(this,_).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(A=>A.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,n=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(R(this,je,!0),s.signal)})},a=()=>{const x=es(this.options,r),I=(()=>{const F={client:h(this,Ne),queryKey:this.queryKey,meta:this.meta};return n(F),F})();return R(this,je,!1),this.options.persister?this.options.persister(x,I,this):x(I)},c=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:h(this,Ne),state:this.state,fetchFn:a};return n(x),x})();(d=this.options.behavior)==null||d.onFetch(c,this),R(this,ke,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=c.fetchOptions)==null?void 0:l.meta))&&D(this,Q,se).call(this,{type:"fetch",meta:(y=c.fetchOptions)==null?void 0:y.meta}),R(this,_,ss({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:x=>{x instanceof Ut&&x.revert&&this.setState({...h(this,ke),fetchStatus:"idle"}),s.abort()},onFail:(x,A)=>{D(this,Q,se).call(this,{type:"failed",failureCount:x,error:A})},onPause:()=>{D(this,Q,se).call(this,{type:"pause"})},onContinue:()=>{D(this,Q,se).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const x=await h(this,_).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(w=(b=h(this,$).config).onSuccess)==null||w.call(b,x,this),(m=(f=h(this,$).config).onSettled)==null||m.call(f,x,this.state.error,this),x}catch(x){if(x instanceof Ut){if(x.silent)return h(this,_).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw D(this,Q,se).call(this,{type:"error",error:x}),(S=(g=h(this,$).config).onError)==null||S.call(g,x,this),(E=(v=h(this,$).config).onSettled)==null||E.call(v,this.state.data,x,this),x}finally{this.scheduleGc()}}},Re=new WeakMap,ke=new WeakMap,$=new WeakMap,Ne=new WeakMap,_=new WeakMap,Je=new WeakMap,je=new WeakMap,Q=new WeakSet,se=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...mn(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return R(this,ke,e.manual?n:void 0),n;case"error":const a=e.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),M.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),h(this,$).notify({query:this,type:"updated",action:e})})},qr);function mn(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rs(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fr(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function pr(t){return{onFetch:(e,r)=>{var l,y,b,w,f;const s=e.options,n=(b=(y=(l=e.fetchOptions)==null?void 0:l.meta)==null?void 0:y.fetchMore)==null?void 0:b.direction,a=((w=e.state.data)==null?void 0:w.pages)||[],i=((f=e.state.data)==null?void 0:f.pageParams)||[];let c={pages:[],pageParams:[]},p=0;const d=async()=>{let m=!1;const g=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},S=es(e.options,e.fetchOptions),v=async(E,x,A)=>{if(m)return Promise.reject();if(x==null&&E.pages.length)return Promise.resolve(E);const F=(()=>{const J={client:e.client,queryKey:e.queryKey,pageParam:x,direction:A?"backward":"forward",meta:e.options.meta};return g(J),J})(),ae=await S(F),{maxPages:G}=e.options,C=A?on:an;return{pages:C(E.pages,ae,G),pageParams:C(E.pageParams,x,G)}};if(n&&a.length){const E=n==="backward",x=E?yn:mr,A={pages:a,pageParams:i},I=x(s,A);c=await v(A,I,E)}else{const E=t??a.length;do{const x=p===0?i[0]??s.initialPageParam:mr(s,c);if(p>0&&x==null)break;c=await v(c,x),p++}while(p<E)}return c};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=d}}}function mr(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function yn(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var We,Y,U,Oe,ee,ce,Hr,gn=(Hr=class extends ns{constructor(e){super();j(this,ee);j(this,We);j(this,Y);j(this,U);j(this,Oe);R(this,We,e.client),this.mutationId=e.mutationId,R(this,U,e.mutationCache),R(this,Y,[]),this.state=e.state||xn(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){h(this,Y).includes(e)||(h(this,Y).push(e),this.clearGcTimeout(),h(this,U).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){R(this,Y,h(this,Y).filter(r=>r!==e)),this.scheduleGc(),h(this,U).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){h(this,Y).length||(this.state.status==="pending"?this.scheduleGc():h(this,U).remove(this))}continue(){var e;return((e=h(this,Oe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,c,p,d,l,y,b,w,f,m,g,S,v,E,x,A,I,F,ae,G;const r=()=>{D(this,ee,ce).call(this,{type:"continue"})},s={client:h(this,We),meta:this.options.meta,mutationKey:this.options.mutationKey};R(this,Oe,ss({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(C,J)=>{D(this,ee,ce).call(this,{type:"failed",failureCount:C,error:J})},onPause:()=>{D(this,ee,ce).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>h(this,U).canRun(this)}));const n=this.state.status==="pending",a=!h(this,Oe).canStart();try{if(n)r();else{D(this,ee,ce).call(this,{type:"pending",variables:e,isPaused:a}),await((c=(i=h(this,U).config).onMutate)==null?void 0:c.call(i,e,this,s));const J=await((d=(p=this.options).onMutate)==null?void 0:d.call(p,e,s));J!==this.state.context&&D(this,ee,ce).call(this,{type:"pending",context:J,variables:e,isPaused:a})}const C=await h(this,Oe).start();return await((y=(l=h(this,U).config).onSuccess)==null?void 0:y.call(l,C,e,this.state.context,this,s)),await((w=(b=this.options).onSuccess)==null?void 0:w.call(b,C,e,this.state.context,s)),await((m=(f=h(this,U).config).onSettled)==null?void 0:m.call(f,C,null,this.state.variables,this.state.context,this,s)),await((S=(g=this.options).onSettled)==null?void 0:S.call(g,C,null,e,this.state.context,s)),D(this,ee,ce).call(this,{type:"success",data:C}),C}catch(C){try{throw await((E=(v=h(this,U).config).onError)==null?void 0:E.call(v,C,e,this.state.context,this,s)),await((A=(x=this.options).onError)==null?void 0:A.call(x,C,e,this.state.context,s)),await((F=(I=h(this,U).config).onSettled)==null?void 0:F.call(I,void 0,C,this.state.variables,this.state.context,this,s)),await((G=(ae=this.options).onSettled)==null?void 0:G.call(ae,void 0,C,e,this.state.context,s)),C}finally{D(this,ee,ce).call(this,{type:"error",error:C})}}finally{h(this,U).runNext(this)}}},We=new WeakMap,Y=new WeakMap,U=new WeakMap,Oe=new WeakMap,ee=new WeakSet,ce=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),M.batch(()=>{h(this,Y).forEach(s=>{s.onMutationUpdate(e)}),h(this,U).notify({mutation:this,type:"updated",action:e})})},Hr);function xn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ne,K,Xe,Br,wn=(Br=class extends bt{constructor(e={}){super();j(this,ne);j(this,K);j(this,Xe);this.config=e,R(this,ne,new Set),R(this,K,new Map),R(this,Xe,0)}build(e,r,s){const n=new gn({client:e,mutationCache:this,mutationId:++nt(this,Xe)._,options:e.defaultMutationOptions(r),state:s});return this.add(n),n}add(e){h(this,ne).add(e);const r=ut(e);if(typeof r=="string"){const s=h(this,K).get(r);s?s.push(e):h(this,K).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(h(this,ne).delete(e)){const r=ut(e);if(typeof r=="string"){const s=h(this,K).get(r);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&h(this,K).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=ut(e);if(typeof r=="string"){const s=h(this,K).get(r),n=s==null?void 0:s.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const r=ut(e);if(typeof r=="string"){const n=(s=h(this,K).get(r))==null?void 0:s.find(a=>a!==e&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){M.batch(()=>{h(this,ne).forEach(e=>{this.notify({type:"removed",mutation:e})}),h(this,ne).clear(),h(this,K).clear()})}getAll(){return Array.from(h(this,ne))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>ur(r,s))}findAll(e={}){return this.getAll().filter(r=>ur(e,r))}notify(e){M.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return M.batch(()=>Promise.all(e.map(r=>r.continue().catch(z))))}},ne=new WeakMap,K=new WeakMap,Xe=new WeakMap,Br);function ut(t){var e;return(e=t.options.scope)==null?void 0:e.id}var te,$r,bn=($r=class extends bt{constructor(e={}){super();j(this,te);this.config=e,R(this,te,new Map)}build(e,r,s){const n=r.queryKey,a=r.queryHash??Vt(n,r);let i=this.get(a);return i||(i=new pn({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){h(this,te).has(e.queryHash)||(h(this,te).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=h(this,te).get(e.queryHash);r&&(e.destroy(),r===e&&h(this,te).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){M.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return h(this,te).get(e)}getAll(){return[...h(this,te).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>lr(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>lr(e,s)):r}notify(e){M.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){M.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){M.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},te=new WeakMap,$r),T,fe,pe,De,Le,me,Ue,Me,zr,En=(zr=class{constructor(t={}){j(this,T);j(this,fe);j(this,pe);j(this,De);j(this,Le);j(this,me);j(this,Ue);j(this,Me);R(this,T,t.queryCache||new bn),R(this,fe,t.mutationCache||new wn),R(this,pe,t.defaultOptions||{}),R(this,De,new Map),R(this,Le,new Map),R(this,me,0)}mount(){nt(this,me)._++,h(this,me)===1&&(R(this,Ue,ts.subscribe(async t=>{t&&(await this.resumePausedMutations(),h(this,T).onFocus())})),R(this,Me,mt.subscribe(async t=>{t&&(await this.resumePausedMutations(),h(this,T).onOnline())})))}unmount(){var t,e;nt(this,me)._--,h(this,me)===0&&((t=h(this,Ue))==null||t.call(this),R(this,Ue,void 0),(e=h(this,Me))==null||e.call(this),R(this,Me,void 0))}isFetching(t){return h(this,T).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return h(this,fe).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=h(this,T).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=h(this,T).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Dt(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return h(this,T).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),n=h(this,T).get(s.queryHash),a=n==null?void 0:n.state.data,i=Zs(e,a);if(i!==void 0)return h(this,T).build(this,s).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return M.batch(()=>h(this,T).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=h(this,T).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=h(this,T);M.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=h(this,T);return M.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=M.batch(()=>h(this,T).findAll(t).map(n=>n.cancel(r)));return Promise.all(s).then(z).catch(z)}invalidateQueries(t,e={}){return M.batch(()=>(h(this,T).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=M.batch(()=>h(this,T).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let a=n.fetch(void 0,r);return r.throwOnError||(a=a.catch(z)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(z)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=h(this,T).build(this,e);return r.isStaleByTime(Dt(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(z).catch(z)}fetchInfiniteQuery(t){return t.behavior=pr(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(z).catch(z)}ensureInfiniteQueryData(t){return t.behavior=pr(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return mt.isOnline()?h(this,fe).resumePausedMutations():Promise.resolve()}getQueryCache(){return h(this,T)}getMutationCache(){return h(this,fe)}getDefaultOptions(){return h(this,pe)}setDefaultOptions(t){R(this,pe,t)}setQueryDefaults(t,e){h(this,De).set(Ve(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...h(this,De).values()],r={};return e.forEach(s=>{Ge(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){h(this,Le).set(Ve(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...h(this,Le).values()],r={};return e.forEach(s=>{Ge(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...h(this,pe).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Vt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...h(this,pe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){h(this,T).clear(),h(this,fe).clear()}},T=new WeakMap,fe=new WeakMap,pe=new WeakMap,De=new WeakMap,Le=new WeakMap,me=new WeakMap,Ue=new WeakMap,Me=new WeakMap,zr),Sn=O.createContext(void 0),vn=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(Sn.Provider,{value:t,children:e}));const Rn="modulepreload",Nn=function(t){return"/"+t},yr={},re=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(r.map(p=>{if(p=Nn(p),p in yr)return;yr[p]=!0;const d=p.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${l}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":Rn,d||(y.as="script"),y.crossOrigin="",y.href=p,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return n.then(i=>{for(const c of i||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};function as(t,e){return function(){return t.apply(e,arguments)}}const{toString:jn}=Object.prototype,{getPrototypeOf:Jt}=Object,{iterator:St,toStringTag:is}=Symbol,vt=(t=>e=>{const r=jn.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),V=t=>(t=t.toLowerCase(),e=>vt(e)===t),Rt=t=>e=>typeof e===t,{isArray:He}=Array,qe=Rt("undefined");function Ze(t){return t!==null&&!qe(t)&&t.constructor!==null&&!qe(t.constructor)&&q(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const os=V("ArrayBuffer");function On(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&os(t.buffer),e}const An=Rt("string"),q=Rt("function"),cs=Rt("number"),Ye=t=>t!==null&&typeof t=="object",Tn=t=>t===!0||t===!1,dt=t=>{if(vt(t)!=="object")return!1;const e=Jt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(is in t)&&!(St in t)},Cn=t=>{if(!Ye(t)||Ze(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Pn=V("Date"),Fn=V("File"),In=V("Blob"),_n=V("FileList"),kn=t=>Ye(t)&&q(t.pipe),Dn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||q(t.append)&&((e=vt(t))==="formdata"||e==="object"&&q(t.toString)&&t.toString()==="[object FormData]"))},Ln=V("URLSearchParams"),[Un,Mn,qn,Hn]=["ReadableStream","Request","Response","Headers"].map(V),Bn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function et(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),He(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{if(Ze(t))return;const a=r?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let c;for(s=0;s<i;s++)c=a[s],e.call(null,t[c],c,t)}}function ls(t,e){if(Ze(t))return null;e=e.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const Ee=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,us=t=>!qe(t)&&t!==Ee;function Mt(){const{caseless:t,skipUndefined:e}=us(this)&&this||{},r={},s=(n,a)=>{const i=t&&ls(r,a)||a;dt(r[i])&&dt(n)?r[i]=Mt(r[i],n):dt(n)?r[i]=Mt({},n):He(n)?r[i]=n.slice():(!e||!qe(n))&&(r[i]=n)};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&et(arguments[n],s);return r}const $n=(t,e,r,{allOwnKeys:s}={})=>(et(e,(n,a)=>{r&&q(n)?t[a]=as(n,r):t[a]=n},{allOwnKeys:s}),t),zn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Qn=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Kn=(t,e,r,s)=>{let n,a,i;const c={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),a=n.length;a-- >0;)i=n[a],(!s||s(i,t,e))&&!c[i]&&(e[i]=t[i],c[i]=!0);t=r!==!1&&Jt(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Vn=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},Gn=t=>{if(!t)return null;if(He(t))return t;let e=t.length;if(!cs(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Jn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Jt(Uint8Array)),Wn=(t,e)=>{const s=(t&&t[St]).call(t);let n;for(;(n=s.next())&&!n.done;){const a=n.value;e.call(t,a[0],a[1])}},Xn=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},Zn=V("HTMLFormElement"),Yn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),gr=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ea=V("RegExp"),hs=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};et(r,(n,a)=>{let i;(i=e(n,a,t))!==!1&&(s[a]=i||n)}),Object.defineProperties(t,s)},ta=t=>{hs(t,(e,r)=>{if(q(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(q(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ra=(t,e)=>{const r={},s=n=>{n.forEach(a=>{r[a]=!0})};return He(t)?s(t):s(String(t).split(e)),r},sa=()=>{},na=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function aa(t){return!!(t&&q(t.append)&&t[is]==="FormData"&&t[St])}const ia=t=>{const e=new Array(10),r=(s,n)=>{if(Ye(s)){if(e.indexOf(s)>=0)return;if(Ze(s))return s;if(!("toJSON"in s)){e[n]=s;const a=He(s)?[]:{};return et(s,(i,c)=>{const p=r(i,n+1);!qe(p)&&(a[c]=p)}),e[n]=void 0,a}}return s};return r(t,0)},oa=V("AsyncFunction"),ca=t=>t&&(Ye(t)||q(t))&&q(t.then)&&q(t.catch),ds=((t,e)=>t?setImmediate:e?((r,s)=>(Ee.addEventListener("message",({source:n,data:a})=>{n===Ee&&a===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Ee.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",q(Ee.postMessage)),la=typeof queueMicrotask<"u"?queueMicrotask.bind(Ee):typeof process<"u"&&process.nextTick||ds,ua=t=>t!=null&&q(t[St]),u={isArray:He,isArrayBuffer:os,isBuffer:Ze,isFormData:Dn,isArrayBufferView:On,isString:An,isNumber:cs,isBoolean:Tn,isObject:Ye,isPlainObject:dt,isEmptyObject:Cn,isReadableStream:Un,isRequest:Mn,isResponse:qn,isHeaders:Hn,isUndefined:qe,isDate:Pn,isFile:Fn,isBlob:In,isRegExp:ea,isFunction:q,isStream:kn,isURLSearchParams:Ln,isTypedArray:Jn,isFileList:_n,forEach:et,merge:Mt,extend:$n,trim:Bn,stripBOM:zn,inherits:Qn,toFlatObject:Kn,kindOf:vt,kindOfTest:V,endsWith:Vn,toArray:Gn,forEachEntry:Wn,matchAll:Xn,isHTMLForm:Zn,hasOwnProperty:gr,hasOwnProp:gr,reduceDescriptors:hs,freezeMethods:ta,toObjectSet:ra,toCamelCase:Yn,noop:sa,toFiniteNumber:na,findKey:ls,global:Ee,isContextDefined:us,isSpecCompliantForm:aa,toJSONObject:ia,isAsyncFn:oa,isThenable:ca,setImmediate:ds,asap:la,isIterable:ua};function N(t,e,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}u.inherits(N,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.status}}});const fs=N.prototype,ps={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ps[t]={value:t}});Object.defineProperties(N,ps);Object.defineProperty(fs,"isAxiosError",{value:!0});N.from=(t,e,r,s,n,a)=>{const i=Object.create(fs);u.toFlatObject(t,i,function(l){return l!==Error.prototype},d=>d!=="isAxiosError");const c=t&&t.message?t.message:"Error",p=e==null&&t?t.code:e;return N.call(i,c,p,r,s,n),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",a&&Object.assign(i,a),i};const ha=null;function qt(t){return u.isPlainObject(t)||u.isArray(t)}function ms(t){return u.endsWith(t,"[]")?t.slice(0,-2):t}function xr(t,e,r){return t?t.concat(e).map(function(n,a){return n=ms(n),!r&&a?"["+n+"]":n}).join(r?".":""):e}function da(t){return u.isArray(t)&&!t.some(qt)}const fa=u.toFlatObject(u,{},null,function(e){return/^is[A-Z]/.test(e)});function Nt(t,e,r){if(!u.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=u.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!u.isUndefined(g[m])});const s=r.metaTokens,n=r.visitor||l,a=r.dots,i=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(e);if(!u.isFunction(n))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(u.isDate(f))return f.toISOString();if(u.isBoolean(f))return f.toString();if(!p&&u.isBlob(f))throw new N("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(f)||u.isTypedArray(f)?p&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,m,g){let S=f;if(f&&!g&&typeof f=="object"){if(u.endsWith(m,"{}"))m=s?m:m.slice(0,-2),f=JSON.stringify(f);else if(u.isArray(f)&&da(f)||(u.isFileList(f)||u.endsWith(m,"[]"))&&(S=u.toArray(f)))return m=ms(m),S.forEach(function(E,x){!(u.isUndefined(E)||E===null)&&e.append(i===!0?xr([m],x,a):i===null?m:m+"[]",d(E))}),!1}return qt(f)?!0:(e.append(xr(g,m,a),d(f)),!1)}const y=[],b=Object.assign(fa,{defaultVisitor:l,convertValue:d,isVisitable:qt});function w(f,m){if(!u.isUndefined(f)){if(y.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));y.push(f),u.forEach(f,function(S,v){(!(u.isUndefined(S)||S===null)&&n.call(e,S,u.isString(v)?v.trim():v,m,b))===!0&&w(S,m?m.concat(v):[v])}),y.pop()}}if(!u.isObject(t))throw new TypeError("data must be an object");return w(t),e}function wr(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Wt(t,e){this._pairs=[],t&&Nt(t,this,e)}const ys=Wt.prototype;ys.append=function(e,r){this._pairs.push([e,r])};ys.toString=function(e){const r=e?function(s){return e.call(this,s,wr)}:wr;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function pa(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gs(t,e,r){if(!e)return t;const s=r&&r.encode||pa;u.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(n?a=n(e,r):a=u.isURLSearchParams(e)?e.toString():new Wt(e,r).toString(s),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class br{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){u.forEach(this.handlers,function(s){s!==null&&e(s)})}}const xs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ma=typeof URLSearchParams<"u"?URLSearchParams:Wt,ya=typeof FormData<"u"?FormData:null,ga=typeof Blob<"u"?Blob:null,xa={isBrowser:!0,classes:{URLSearchParams:ma,FormData:ya,Blob:ga},protocols:["http","https","file","blob","url","data"]},Xt=typeof window<"u"&&typeof document<"u",Ht=typeof navigator=="object"&&navigator||void 0,wa=Xt&&(!Ht||["ReactNative","NativeScript","NS"].indexOf(Ht.product)<0),ba=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ea=Xt&&window.location.href||"http://localhost",Sa=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xt,hasStandardBrowserEnv:wa,hasStandardBrowserWebWorkerEnv:ba,navigator:Ht,origin:Ea},Symbol.toStringTag,{value:"Module"})),L={...Sa,...xa};function va(t,e){return Nt(t,new L.classes.URLSearchParams,{visitor:function(r,s,n,a){return L.isNode&&u.isBuffer(r)?(this.append(s,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function Ra(t){return u.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Na(t){const e={},r=Object.keys(t);let s;const n=r.length;let a;for(s=0;s<n;s++)a=r[s],e[a]=t[a];return e}function ws(t){function e(r,s,n,a){let i=r[a++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),p=a>=r.length;return i=!i&&u.isArray(n)?n.length:i,p?(u.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!c):((!n[i]||!u.isObject(n[i]))&&(n[i]=[]),e(r,s,n[i],a)&&u.isArray(n[i])&&(n[i]=Na(n[i])),!c)}if(u.isFormData(t)&&u.isFunction(t.entries)){const r={};return u.forEachEntry(t,(s,n)=>{e(Ra(s),n,r,0)}),r}return null}function ja(t,e,r){if(u.isString(t))try{return(e||JSON.parse)(t),u.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const tt={transitional:xs,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,a=u.isObject(e);if(a&&u.isHTMLForm(e)&&(e=new FormData(e)),u.isFormData(e))return n?JSON.stringify(ws(e)):e;if(u.isArrayBuffer(e)||u.isBuffer(e)||u.isStream(e)||u.isFile(e)||u.isBlob(e)||u.isReadableStream(e))return e;if(u.isArrayBufferView(e))return e.buffer;if(u.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return va(e,this.formSerializer).toString();if((c=u.isFileList(e))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Nt(c?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),ja(e)):e}],transformResponse:[function(e){const r=this.transitional||tt.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(u.isResponse(e)||u.isReadableStream(e))return e;if(e&&u.isString(e)&&(s&&!this.responseType||n)){const i=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?N.from(c,N.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:L.classes.FormData,Blob:L.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],t=>{tt.headers[t]={}});const Oa=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Aa=t=>{const e={};let r,s,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),r=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!r||e[r]&&Oa[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},Er=Symbol("internals");function Qe(t){return t&&String(t).trim().toLowerCase()}function ft(t){return t===!1||t==null?t:u.isArray(t)?t.map(ft):String(t)}function Ta(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}const Ca=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ct(t,e,r,s,n){if(u.isFunction(s))return s.call(this,e,r);if(n&&(e=r),!!u.isString(e)){if(u.isString(s))return e.indexOf(s)!==-1;if(u.isRegExp(s))return s.test(e)}}function Pa(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function Fa(t,e){const r=u.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,a,i){return this[s].call(this,e,n,a,i)},configurable:!0})})}let H=class{constructor(e){e&&this.set(e)}set(e,r,s){const n=this;function a(c,p,d){const l=Qe(p);if(!l)throw new Error("header name must be a non-empty string");const y=u.findKey(n,l);(!y||n[y]===void 0||d===!0||d===void 0&&n[y]!==!1)&&(n[y||p]=ft(c))}const i=(c,p)=>u.forEach(c,(d,l)=>a(d,l,p));if(u.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(u.isString(e)&&(e=e.trim())&&!Ca(e))i(Aa(e),r);else if(u.isObject(e)&&u.isIterable(e)){let c={},p,d;for(const l of e){if(!u.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[d=l[0]]=(p=c[d])?u.isArray(p)?[...p,l[1]]:[p,l[1]]:l[1]}i(c,r)}else e!=null&&a(r,e,s);return this}get(e,r){if(e=Qe(e),e){const s=u.findKey(this,e);if(s){const n=this[s];if(!r)return n;if(r===!0)return Ta(n);if(u.isFunction(r))return r.call(this,n,s);if(u.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Qe(e),e){const s=u.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||Ct(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let n=!1;function a(i){if(i=Qe(i),i){const c=u.findKey(s,i);c&&(!r||Ct(s,s[c],c,r))&&(delete s[c],n=!0)}}return u.isArray(e)?e.forEach(a):a(e),n}clear(e){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const a=r[s];(!e||Ct(this,this[a],a,e,!0))&&(delete this[a],n=!0)}return n}normalize(e){const r=this,s={};return u.forEach(this,(n,a)=>{const i=u.findKey(s,a);if(i){r[i]=ft(n),delete r[a];return}const c=e?Pa(a):String(a).trim();c!==a&&delete r[a],r[c]=ft(n),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return u.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=e&&u.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[Er]=this[Er]={accessors:{}}).accessors,n=this.prototype;function a(i){const c=Qe(i);s[c]||(Fa(n,i),s[c]=!0)}return u.isArray(e)?e.forEach(a):a(e),this}};H.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(H.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[r]=s}}});u.freezeMethods(H);function Pt(t,e){const r=this||tt,s=e||r,n=H.from(s.headers);let a=s.data;return u.forEach(t,function(c){a=c.call(r,a,n.normalize(),e?e.status:void 0)}),n.normalize(),a}function bs(t){return!!(t&&t.__CANCEL__)}function Be(t,e,r){N.call(this,t??"canceled",N.ERR_CANCELED,e,r),this.name="CanceledError"}u.inherits(Be,N,{__CANCEL__:!0});function Es(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new N("Request failed with status code "+r.status,[N.ERR_BAD_REQUEST,N.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ia(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function _a(t,e){t=t||10;const r=new Array(t),s=new Array(t);let n=0,a=0,i;return e=e!==void 0?e:1e3,function(p){const d=Date.now(),l=s[a];i||(i=d),r[n]=p,s[n]=d;let y=a,b=0;for(;y!==n;)b+=r[y++],y=y%t;if(n=(n+1)%t,n===a&&(a=(a+1)%t),d-i<e)return;const w=l&&d-l;return w?Math.round(b*1e3/w):void 0}}function ka(t,e){let r=0,s=1e3/e,n,a;const i=(d,l=Date.now())=>{r=l,n=null,a&&(clearTimeout(a),a=null),t(...d)};return[(...d)=>{const l=Date.now(),y=l-r;y>=s?i(d,l):(n=d,a||(a=setTimeout(()=>{a=null,i(n)},s-y)))},()=>n&&i(n)]}const yt=(t,e,r=3)=>{let s=0;const n=_a(50,250);return ka(a=>{const i=a.loaded,c=a.lengthComputable?a.total:void 0,p=i-s,d=n(p),l=i<=c;s=i;const y={loaded:i,total:c,progress:c?i/c:void 0,bytes:p,rate:d||void 0,estimated:d&&c&&l?(c-i)/d:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(y)},r)},Sr=(t,e)=>{const r=t!=null;return[s=>e[0]({lengthComputable:r,total:t,loaded:s}),e[1]]},vr=t=>(...e)=>u.asap(()=>t(...e)),Da=L.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,L.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(L.origin),L.navigator&&/(msie|trident)/i.test(L.navigator.userAgent)):()=>!0,La=L.hasStandardBrowserEnv?{write(t,e,r,s,n,a){const i=[t+"="+encodeURIComponent(e)];u.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),u.isString(s)&&i.push("path="+s),u.isString(n)&&i.push("domain="+n),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ua(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ma(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ss(t,e,r){let s=!Ua(e);return t&&(s||r==!1)?Ma(t,e):e}const Rr=t=>t instanceof H?{...t}:t;function Te(t,e){e=e||{};const r={};function s(d,l,y,b){return u.isPlainObject(d)&&u.isPlainObject(l)?u.merge.call({caseless:b},d,l):u.isPlainObject(l)?u.merge({},l):u.isArray(l)?l.slice():l}function n(d,l,y,b){if(u.isUndefined(l)){if(!u.isUndefined(d))return s(void 0,d,y,b)}else return s(d,l,y,b)}function a(d,l){if(!u.isUndefined(l))return s(void 0,l)}function i(d,l){if(u.isUndefined(l)){if(!u.isUndefined(d))return s(void 0,d)}else return s(void 0,l)}function c(d,l,y){if(y in e)return s(d,l);if(y in t)return s(void 0,d)}const p={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(d,l,y)=>n(Rr(d),Rr(l),y,!0)};return u.forEach(Object.keys({...t,...e}),function(l){const y=p[l]||n,b=y(t[l],e[l],l);u.isUndefined(b)&&y!==c||(r[l]=b)}),r}const vs=t=>{const e=Te({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:a,headers:i,auth:c}=e;if(e.headers=i=H.from(i),e.url=gs(Ss(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),u.isFormData(r)){if(L.hasStandardBrowserEnv||L.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(u.isFunction(r.getHeaders)){const p=r.getHeaders(),d=["content-type","content-length"];Object.entries(p).forEach(([l,y])=>{d.includes(l.toLowerCase())&&i.set(l,y)})}}if(L.hasStandardBrowserEnv&&(s&&u.isFunction(s)&&(s=s(e)),s||s!==!1&&Da(e.url))){const p=n&&a&&La.read(a);p&&i.set(n,p)}return e},qa=typeof XMLHttpRequest<"u",Ha=qa&&function(t){return new Promise(function(r,s){const n=vs(t);let a=n.data;const i=H.from(n.headers).normalize();let{responseType:c,onUploadProgress:p,onDownloadProgress:d}=n,l,y,b,w,f;function m(){w&&w(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function S(){if(!g)return;const E=H.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),A={data:!c||c==="text"||c==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:E,config:t,request:g};Es(function(F){r(F),m()},function(F){s(F),m()},A),g=null}"onloadend"in g?g.onloadend=S:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(S)},g.onabort=function(){g&&(s(new N("Request aborted",N.ECONNABORTED,t,g)),g=null)},g.onerror=function(x){const A=x&&x.message?x.message:"Network Error",I=new N(A,N.ERR_NETWORK,t,g);I.event=x||null,s(I),g=null},g.ontimeout=function(){let x=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||xs;n.timeoutErrorMessage&&(x=n.timeoutErrorMessage),s(new N(x,A.clarifyTimeoutError?N.ETIMEDOUT:N.ECONNABORTED,t,g)),g=null},a===void 0&&i.setContentType(null),"setRequestHeader"in g&&u.forEach(i.toJSON(),function(x,A){g.setRequestHeader(A,x)}),u.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),c&&c!=="json"&&(g.responseType=n.responseType),d&&([b,f]=yt(d,!0),g.addEventListener("progress",b)),p&&g.upload&&([y,w]=yt(p),g.upload.addEventListener("progress",y),g.upload.addEventListener("loadend",w)),(n.cancelToken||n.signal)&&(l=E=>{g&&(s(!E||E.type?new Be(null,t,g):E),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const v=Ia(n.url);if(v&&L.protocols.indexOf(v)===-1){s(new N("Unsupported protocol "+v+":",N.ERR_BAD_REQUEST,t));return}g.send(a||null)})},Ba=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let s=new AbortController,n;const a=function(d){if(!n){n=!0,c();const l=d instanceof Error?d:this.reason;s.abort(l instanceof N?l:new Be(l instanceof Error?l.message:l))}};let i=e&&setTimeout(()=>{i=null,a(new N(`timeout ${e} of ms exceeded`,N.ETIMEDOUT))},e);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),t=null)};t.forEach(d=>d.addEventListener("abort",a));const{signal:p}=s;return p.unsubscribe=()=>u.asap(c),p}},$a=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let s=0,n;for(;s<r;)n=s+e,yield t.slice(s,n),s=n},za=async function*(t,e){for await(const r of Qa(t))yield*$a(r,e)},Qa=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},Nr=(t,e,r,s)=>{const n=za(t,e);let a=0,i,c=p=>{i||(i=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:d,value:l}=await n.next();if(d){c(),p.close();return}let y=l.byteLength;if(r){let b=a+=y;r(b)}p.enqueue(new Uint8Array(l))}catch(d){throw c(d),d}},cancel(p){return c(p),n.return()}},{highWaterMark:2})},jr=64*1024,{isFunction:ht}=u,Ka=(({Request:t,Response:e})=>({Request:t,Response:e}))(u.global),{ReadableStream:Or,TextEncoder:Ar}=u.global,Tr=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Va=t=>{t=u.merge.call({skipUndefined:!0},Ka,t);const{fetch:e,Request:r,Response:s}=t,n=e?ht(e):typeof fetch=="function",a=ht(r),i=ht(s);if(!n)return!1;const c=n&&ht(Or),p=n&&(typeof Ar=="function"?(f=>m=>f.encode(m))(new Ar):async f=>new Uint8Array(await new r(f).arrayBuffer())),d=a&&c&&Tr(()=>{let f=!1;const m=new r(L.origin,{body:new Or,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!m}),l=i&&c&&Tr(()=>u.isReadableStream(new s("").body)),y={stream:l&&(f=>f.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!y[f]&&(y[f]=(m,g)=>{let S=m&&m[f];if(S)return S.call(m);throw new N(`Response type '${f}' is not supported`,N.ERR_NOT_SUPPORT,g)})});const b=async f=>{if(f==null)return 0;if(u.isBlob(f))return f.size;if(u.isSpecCompliantForm(f))return(await new r(L.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(u.isArrayBufferView(f)||u.isArrayBuffer(f))return f.byteLength;if(u.isURLSearchParams(f)&&(f=f+""),u.isString(f))return(await p(f)).byteLength},w=async(f,m)=>{const g=u.toFiniteNumber(f.getContentLength());return g??b(m)};return async f=>{let{url:m,method:g,data:S,signal:v,cancelToken:E,timeout:x,onDownloadProgress:A,onUploadProgress:I,responseType:F,headers:ae,withCredentials:G="same-origin",fetchOptions:C}=vs(f),J=e||fetch;F=F?(F+"").toLowerCase():"text";let rt=Ba([v,E&&E.toAbortSignal()],x),$e=null;const ye=rt&&rt.unsubscribe&&(()=>{rt.unsubscribe()});let Yt;try{if(I&&d&&g!=="get"&&g!=="head"&&(Yt=await w(ae,S))!==0){let oe=new r(m,{method:"POST",body:S,duplex:"half"}),Ce;if(u.isFormData(S)&&(Ce=oe.headers.get("content-type"))&&ae.setContentType(Ce),oe.body){const[At,st]=Sr(Yt,yt(vr(I)));S=Nr(oe.body,jr,At,st)}}u.isString(G)||(G=G?"include":"omit");const W=a&&"credentials"in r.prototype,er={...C,signal:rt,method:g.toUpperCase(),headers:ae.normalize().toJSON(),body:S,duplex:"half",credentials:W?G:void 0};$e=a&&new r(m,er);let ie=await(a?J($e,C):J(m,er));const tr=l&&(F==="stream"||F==="response");if(l&&(A||tr&&ye)){const oe={};["status","statusText","headers"].forEach(rr=>{oe[rr]=ie[rr]});const Ce=u.toFiniteNumber(ie.headers.get("content-length")),[At,st]=A&&Sr(Ce,yt(vr(A),!0))||[];ie=new s(Nr(ie.body,jr,At,()=>{st&&st(),ye&&ye()}),oe)}F=F||"text";let Ps=await y[u.findKey(y,F)||"text"](ie,f);return!tr&&ye&&ye(),await new Promise((oe,Ce)=>{Es(oe,Ce,{data:Ps,headers:H.from(ie.headers),status:ie.status,statusText:ie.statusText,config:f,request:$e})})}catch(W){throw ye&&ye(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new N("Network Error",N.ERR_NETWORK,f,$e),{cause:W.cause||W}):N.from(W,W&&W.code,f,$e)}}},Ga=new Map,Rs=t=>{let e=t?t.env:{};const{fetch:r,Request:s,Response:n}=e,a=[s,n,r];let i=a.length,c=i,p,d,l=Ga;for(;c--;)p=a[c],d=l.get(p),d===void 0&&l.set(p,d=c?new Map:Va(e)),l=d;return d};Rs();const Bt={http:ha,xhr:Ha,fetch:{get:Rs}};u.forEach(Bt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Cr=t=>`- ${t}`,Ja=t=>u.isFunction(t)||t===null||t===!1,Ns={getAdapter:(t,e)=>{t=u.isArray(t)?t:[t];const{length:r}=t;let s,n;const a={};for(let i=0;i<r;i++){s=t[i];let c;if(n=s,!Ja(s)&&(n=Bt[(c=String(s)).toLowerCase()],n===void 0))throw new N(`Unknown adapter '${c}'`);if(n&&(u.isFunction(n)||(n=n.get(e))))break;a[c||"#"+i]=n}if(!n){const i=Object.entries(a).map(([p,d])=>`adapter ${p} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=r?i.length>1?`since :
`+i.map(Cr).join(`
`):" "+Cr(i[0]):"as no adapter specified";throw new N("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:Bt};function Ft(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Be(null,t)}function Pr(t){return Ft(t),t.headers=H.from(t.headers),t.data=Pt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ns.getAdapter(t.adapter||tt.adapter,t)(t).then(function(s){return Ft(t),s.data=Pt.call(t,t.transformResponse,s),s.headers=H.from(s.headers),s},function(s){return bs(s)||(Ft(t),s&&s.response&&(s.response.data=Pt.call(t,t.transformResponse,s.response),s.response.headers=H.from(s.response.headers))),Promise.reject(s)})}const js="1.12.2",jt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{jt[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const Fr={};jt.transitional=function(e,r,s){function n(a,i){return"[Axios v"+js+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return(a,i,c)=>{if(e===!1)throw new N(n(i," has been removed"+(r?" in "+r:"")),N.ERR_DEPRECATED);return r&&!Fr[i]&&(Fr[i]=!0,console.warn(n(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,i,c):!0}};jt.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Wa(t,e,r){if(typeof t!="object")throw new N("options must be an object",N.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const a=s[n],i=e[a];if(i){const c=t[a],p=c===void 0||i(c,a,t);if(p!==!0)throw new N("option "+a+" must be "+p,N.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new N("Unknown option "+a,N.ERR_BAD_OPTION)}}const pt={assertOptions:Wa,validators:jt},Z=pt.validators;let Ae=class{constructor(e){this.defaults=e||{},this.interceptors={request:new br,response:new br}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Te(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:a}=r;s!==void 0&&pt.assertOptions(s,{silentJSONParsing:Z.transitional(Z.boolean),forcedJSONParsing:Z.transitional(Z.boolean),clarifyTimeoutError:Z.transitional(Z.boolean)},!1),n!=null&&(u.isFunction(n)?r.paramsSerializer={serialize:n}:pt.assertOptions(n,{encode:Z.function,serialize:Z.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),pt.assertOptions(r,{baseUrl:Z.spelling("baseURL"),withXsrfToken:Z.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=a&&u.merge(a.common,a[r.method]);a&&u.forEach(["delete","get","head","post","put","patch","common"],f=>{delete a[f]}),r.headers=H.concat(i,a);const c=[];let p=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(p=p&&m.synchronous,c.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let l,y=0,b;if(!p){const f=[Pr.bind(this),void 0];for(f.unshift(...c),f.push(...d),b=f.length,l=Promise.resolve(r);y<b;)l=l.then(f[y++],f[y++]);return l}b=c.length;let w=r;for(;y<b;){const f=c[y++],m=c[y++];try{w=f(w)}catch(g){m.call(this,g);break}}try{l=Pr.call(this,w)}catch(f){return Promise.reject(f)}for(y=0,b=d.length;y<b;)l=l.then(d[y++],d[y++]);return l}getUri(e){e=Te(this.defaults,e);const r=Ss(e.baseURL,e.url,e.allowAbsoluteUrls);return gs(r,e.params,e.paramsSerializer)}};u.forEach(["delete","get","head","options"],function(e){Ae.prototype[e]=function(r,s){return this.request(Te(s||{},{method:e,url:r,data:(s||{}).data}))}});u.forEach(["post","put","patch"],function(e){function r(s){return function(a,i,c){return this.request(Te(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Ae.prototype[e]=r(),Ae.prototype[e+"Form"]=r(!0)});let Xa=class Os{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const s=this;this.promise.then(n=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](n);s._listeners=null}),this.promise.then=n=>{let a;const i=new Promise(c=>{s.subscribe(c),a=c}).then(n);return i.cancel=function(){s.unsubscribe(a)},i},e(function(a,i,c){s.reason||(s.reason=new Be(a,i,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Os(function(n){e=n}),cancel:e}}};function Za(t){return function(r){return t.apply(null,r)}}function Ya(t){return u.isObject(t)&&t.isAxiosError===!0}const $t={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($t).forEach(([t,e])=>{$t[e]=t});function As(t){const e=new Ae(t),r=as(Ae.prototype.request,e);return u.extend(r,Ae.prototype,e,{allOwnKeys:!0}),u.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return As(Te(t,n))},r}const P=As(tt);P.Axios=Ae;P.CanceledError=Be;P.CancelToken=Xa;P.isCancel=bs;P.VERSION=js;P.toFormData=Nt;P.AxiosError=N;P.Cancel=P.CanceledError;P.all=function(e){return Promise.all(e)};P.spread=Za;P.isAxiosError=Ya;P.mergeConfig=Te;P.AxiosHeaders=H;P.formToJSON=t=>ws(u.isHTMLForm(t)?new FormData(t):t);P.getAdapter=Ns.getAdapter;P.HttpStatusCode=$t;P.default=P;const{Axios:Ii,AxiosError:_i,CanceledError:ki,isCancel:Di,CancelToken:Li,VERSION:Ui,all:Mi,Cancel:qi,isAxiosError:Hi,spread:Bi,toFormData:$i,AxiosHeaders:zi,HttpStatusCode:Qi,formToJSON:Ki,getAdapter:Vi,mergeConfig:Gi}=P;var ei={};class ti{constructor(){B(this,"api");this.api=P.create({baseURL:"https://us-central1-smart-matwana-ke.cloudfunctions.net/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(e=>{const r=localStorage.getItem("authToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&(localStorage.removeItem("authToken"),localStorage.removeItem("user")),Promise.reject(e)})}async getHealth(){try{return(await this.api.get("/health")).data}catch(e){throw this.handleError(e)}}async login(e){try{const r=await this.api.post("/auth/login",e);return r.data.success&&r.data.data&&(localStorage.setItem("authToken",r.data.data.token),localStorage.setItem("user",JSON.stringify(r.data.data.user))),r.data}catch(r){throw this.handleError(r)}}async signup(e){try{const r=await this.api.post("/auth/register",e);return r.data.success&&r.data.data&&(localStorage.setItem("authToken",r.data.data.token),localStorage.setItem("user",JSON.stringify(r.data.data.user))),r.data}catch(r){throw this.handleError(r)}}async logout(){localStorage.removeItem("authToken"),localStorage.removeItem("user")}async getCurrentUser(){var e;try{return((e=(await this.api.get("/auth/profile")).data.data)==null?void 0:e.user)||null}catch{const s=localStorage.getItem("user");return s?JSON.parse(s):null}}async getRoutes(e){try{return(await this.api.get("/routes",{params:e})).data}catch(r){throw this.handleError(r)}}async getNearbyRoutes(e,r,s=5){try{return(await this.api.get("/routes/nearby",{params:{lat:e,lng:r,radius:s}})).data}catch(n){throw this.handleError(n)}}async getRoute(e){try{return(await this.api.get(`/routes/${e}`)).data}catch(r){throw this.handleError(r)}}async createRoute(e){try{return(await this.api.post("/routes",e)).data}catch(r){throw this.handleError(r)}}async updateRoute(e,r){try{return(await this.api.put(`/routes/${e}`,r)).data}catch(s){throw this.handleError(s)}}async deleteRoute(e){try{return(await this.api.delete(`/routes/${e}`)).data}catch(r){throw this.handleError(r)}}async getReports(e=1,r=10){try{return(await this.api.get(`/reports?page=${e}&limit=${r}`)).data}catch(s){throw this.handleError(s)}}async getReportsByRoute(e){try{return(await this.api.get(`/reports/route/${e}`)).data}catch(r){throw this.handleError(r)}}async createReport(e){try{return(await this.api.post("/reports",e)).data}catch(r){throw this.handleError(r)}}async updateReport(e,r){try{return(await this.api.put(`/reports/${e}`,r)).data}catch(s){throw this.handleError(s)}}async deleteReport(e){try{return(await this.api.delete(`/reports/${e}`)).data}catch(r){throw this.handleError(r)}}async getScores(e){try{return(await this.api.get("/scores",{params:e})).data}catch(r){throw this.handleError(r)}}async getScoresByRoute(e){try{return(await this.api.get(`/scores/route/${e}`)).data}catch(r){throw this.handleError(r)}}async getTopRoutes(e=10){try{return(await this.api.get(`/scores/top/${e}`)).data}catch(r){throw this.handleError(r)}}async getWorstRoutes(e=10){try{return(await this.api.get(`/scores/worst/${e}`)).data}catch(r){throw this.handleError(r)}}async getAnalytics(){try{return(await this.api.get("/analytics/summary")).data}catch(e){throw this.handleError(e)}}async getUsers(e=1,r=10){try{return(await this.api.get(`/users?page=${e}&limit=${r}`)).data}catch(s){throw this.handleError(s)}}async getUser(e){try{return(await this.api.get(`/users/${e}`)).data}catch(r){throw this.handleError(r)}}async updateUser(e,r){try{return(await this.api.put(`/users/${e}`,r)).data}catch(s){throw this.handleError(s)}}async deleteUser(e){try{return(await this.api.delete(`/users/${e}`)).data}catch(r){throw this.handleError(r)}}handleError(e){var r,s;return e.response?new Error(((r=e.response.data)==null?void 0:r.message)||((s=e.response.data)==null?void 0:s.error)||"Server error"):e.request?new Error("Network error - please check your connection"):new Error(e.message||"An unexpected error occurred")}async uploadFile(e,r){try{const s=new FormData;return s.append("file",e),s.append("type",r),(await this.api.post("/upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw this.handleError(s)}}async searchRoutes(e,r){try{return(await this.api.get(`/routes/search/${encodeURIComponent(e)}`,{params:r})).data}catch(s){throw this.handleError(s)}}async geocodeAddress(e){try{return(await this.api.get(`/geocode?address=${encodeURIComponent(e)}`)).data}catch(r){throw this.handleError(r)}}async predict(e,r){var s;try{return((s=window==null?void 0:window.featureFlags)==null?void 0:s.ai)===!0||ei.VITE_ENABLE_AI==="true"?(await this.api.post("/ai/predict",{routeId:e,features:r})).data:{success:!0,data:{prediction:.5,label:"medium",confidence:.5}}}catch(n){throw this.handleError(n)}}async updateProfile(e,r){try{return(await this.api.put(`/users/${e}`,r)).data}catch(s){throw this.handleError(s)}}async getUserReports(e){try{return(await this.api.get(`/users/${e}/reports`)).data}catch(r){throw this.handleError(r)}}async getFavoriteRoutes(e){try{return(await this.api.get(`/users/${e}/favorites`)).data}catch(r){throw this.handleError(r)}}async addFavoriteRoute(e,r){try{return(await this.api.post(`/users/${e}/favorites`,{routeId:r})).data}catch(s){throw this.handleError(s)}}async removeFavoriteRoute(e,r){try{return(await this.api.delete(`/users/${e}/favorites/${r}`)).data}catch(s){throw this.handleError(s)}}async getUserAnalytics(e){try{return(await this.api.get(`/users/${e}/analytics`)).data}catch(r){throw this.handleError(r)}}async getDashboardStats(){try{return(await this.api.get("/dashboard/stats")).data}catch(e){throw this.handleError(e)}}async getWeatherData(){try{return(await this.api.get("/weather")).data}catch(e){throw this.handleError(e)}}async getRouteInsights(){try{return(await this.api.get("/insights/routes")).data}catch(e){throw this.handleError(e)}}async getFarePrediction(e,r){try{const s=r?{timeOfDay:r}:{};return(await this.api.get(`/predictions/fare/${e}`,{params:s})).data}catch(s){throw this.handleError(s)}}async getSafetyScore(e){try{return(await this.api.get(`/predictions/safety/${e}`)).data}catch(r){throw this.handleError(r)}}async getCrowdDensity(e,r){try{const s=r?{timeOfDay:r}:{};return(await this.api.get(`/predictions/crowd/${e}`,{params:s})).data}catch(s){throw this.handleError(s)}}async getRouteEfficiency(e){try{return(await this.api.get(`/analytics/efficiency/${e}`)).data}catch(r){throw this.handleError(r)}}async predictTravelTime(e,r,s,n){try{return(await this.api.post("/analytics/travel-time/predict",{routeId:e,fromStop:r,toStop:s,timeOfDay:n})).data}catch(a){throw this.handleError(a)}}async findAlternativeRoutes(e,r,s,n){try{return(await this.api.post("/analytics/routes/alternatives",{fromStop:e,toStop:r,maxTime:s,maxCost:n})).data}catch(a){throw this.handleError(a)}}async analyzeTrends(e,r="weekly"){try{return(await this.api.get(`/analytics/trends/${e}`,{params:{period:r}})).data}catch(s){throw this.handleError(s)}}async forecastDemand(e,r){try{return(await this.api.post("/analytics/demand/forecast",{routeId:e,timeSlot:r})).data}catch(s){throw this.handleError(s)}}async getUserRecommendations(e){try{return(await this.api.get(`/analytics/recommendations/${e}`)).data}catch(r){throw this.handleError(r)}}async getBulkEfficiencyScores(e){try{return(await this.api.post("/analytics/efficiency/bulk",{routeIds:e})).data}catch(r){throw this.handleError(r)}}async compareRoutes(e){try{return(await this.api.post("/analytics/routes/compare",{routeIds:e})).data}catch(r){throw this.handleError(r)}}async getAnalyticsDashboard(e){try{return(await this.api.get(`/analytics/dashboard/${e}`)).data}catch(r){throw this.handleError(r)}}async getSaccoDashboard(){try{return(await this.api.get("/sacco/dashboard")).data}catch(e){throw this.handleError(e)}}async getAuthorityDashboard(){try{return(await this.api.get("/authority/dashboard")).data}catch(e){throw this.handleError(e)}}async exportComplianceData(){try{return(await this.api.get("/export/compliance",{responseType:"blob"})).data}catch(e){throw this.handleError(e)}}async exportIncidentsData(){try{return(await this.api.get("/export/incidents",{responseType:"blob"})).data}catch(e){throw this.handleError(e)}}}const It=new ti,Ts={user:null,isAuthenticated:!1,language:"en",settings:{language:"en",notifications:{email:!0,push:!0,safety:!0,updates:!0},privacy:{shareLocation:!0,shareReports:!0,analytics:!0},display:{theme:"auto",mapStyle:"default"}},theme:"light",notifications:!0,isLoading:!1,error:null};function ri(t,e){switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload,isLoading:!1};case"SET_USER":return{...t,user:e.payload,isAuthenticated:!!e.payload};case"SET_AUTHENTICATED":return{...t,isAuthenticated:e.payload};case"SET_LANGUAGE":return{...t,language:e.payload,settings:{...t.settings,language:e.payload}};case"SET_THEME":return{...t,theme:e.payload,settings:{...t.settings,display:{...t.settings.display,theme:e.payload}}};case"SET_NOTIFICATIONS":return{...t,notifications:e.payload,settings:{...t.settings,notifications:{...t.settings.notifications,push:e.payload}}};case"UPDATE_SETTINGS":const r={...t.settings,...e.payload};return{...t,settings:r,language:r.language||t.language};case"LOGOUT":return{...t,user:null,isAuthenticated:!1,error:null};case"RESET":return Ts;default:return t}}const Cs=O.createContext(void 0);function si({children:t}){const[e,r]=O.useReducer(ri,Ts);O.useEffect(()=>{(async()=>{try{r({type:"SET_LOADING",payload:!0});const g=localStorage.getItem("authToken"),S=localStorage.getItem("user");if(g&&S)try{const v=await It.getCurrentUser();v?r({type:"SET_USER",payload:v}):(console.warn("API call failed, clearing stored data"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),r({type:"SET_USER",payload:null}))}catch(v){console.warn("Failed to refresh user data, clearing stored data:",v),localStorage.removeItem("authToken"),localStorage.removeItem("user"),r({type:"SET_USER",payload:null})}}catch(g){console.error("Error loading user:",g)}finally{r({type:"SET_LOADING",payload:!1})}})()},[]),O.useEffect(()=>{(()=>{try{const g=localStorage.getItem("appSettings");if(g){const S=JSON.parse(g);r({type:"UPDATE_SETTINGS",payload:S})}}catch(g){console.error("Error loading settings:",g)}})()},[]),O.useEffect(()=>{try{localStorage.setItem("appSettings",JSON.stringify(e.settings))}catch(m){console.error("Error saving settings:",m)}},[e.settings]),O.useEffect(()=>{const m=document.documentElement;e.theme==="dark"||e.theme==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?m.classList.add("dark"):m.classList.remove("dark")},[e.theme]),O.useEffect(()=>{document.documentElement.lang=e.language},[e.language]);const s=m=>{r({type:"SET_LOADING",payload:m})},n=m=>{r({type:"SET_ERROR",payload:m})},a=m=>{console.log("AppContext setUser called with:",m),r({type:"SET_USER",payload:m})},i=m=>{r({type:"SET_LANGUAGE",payload:m})},c=m=>{r({type:"SET_THEME",payload:m})},p=m=>{r({type:"SET_NOTIFICATIONS",payload:m})},d=m=>{r({type:"UPDATE_SETTINGS",payload:m})},l=()=>{It.logout(),r({type:"LOGOUT"})},y=()=>{It.logout(),r({type:"RESET"})},b=e.theme==="dark"||e.theme==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches,w=e.language,f={state:e,dispatch:r,setLoading:s,setError:n,setUser:a,setLanguage:i,setTheme:c,setNotifications:p,updateSettings:d,logout:l,reset:y,isDarkMode:b,currentLanguage:w};return o.jsx(Cs.Provider,{value:f,children:t})}function Ot(){const t=O.useContext(Cs);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t}const Ir={announceChanges:!0,highContrast:!1,reducedMotion:!1,fontSize:"medium",screenReader:!1},xe=class xe{constructor(){B(this,"announcerElement",null);this.createAnnouncerElement()}static getInstance(){return xe.instance||(xe.instance=new xe),xe.instance}createAnnouncerElement(){typeof document<"u"&&(this.announcerElement=document.createElement("div"),this.announcerElement.setAttribute("aria-live","polite"),this.announcerElement.setAttribute("aria-atomic","true"),this.announcerElement.className="sr-only",this.announcerElement.style.cssText=`
        position: absolute;
        left: -10000px;
        width: 1px;
        height: 1px;
        overflow: hidden;
      `,document.body.appendChild(this.announcerElement))}announce(e,r="polite"){this.announcerElement&&(this.announcerElement.setAttribute("aria-live",r),this.announcerElement.textContent=e,setTimeout(()=>{this.announcerElement&&(this.announcerElement.textContent="")},1e3))}};B(xe,"instance");let zt=xe;const we=class we{constructor(){B(this,"focusHistory",[])}static getInstance(){return we.instance||(we.instance=new we),we.instance}saveFocus(){const e=document.activeElement;e&&this.focusHistory.push(e)}restoreFocus(){const e=this.focusHistory.pop();e&&e.focus()}clearHistory(){this.focusHistory=[]}focusFirst(e){const r=e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');r==null||r.focus()}focusLast(e){const r=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=r[r.length-1];s==null||s.focus()}};B(we,"instance");let gt=we;const ni=O.createContext(void 0);function ai({children:t}){const[e,r]=O.useState(Ir),[s,n]=O.useState(!1);O.useEffect(()=>{(()=>{const f=localStorage.getItem("accessibilityConfig");if(f)try{const S=JSON.parse(f);r({...Ir,...S})}catch(S){console.warn("Failed to parse saved accessibility config:",S)}const m=window.matchMedia("(prefers-reduced-motion: reduce)").matches,g=window.matchMedia("(prefers-contrast: high)").matches;r(S=>({...S,reducedMotion:m,highContrast:g})),n(!0)})()},[]),O.useEffect(()=>{if(!s)return;const w=document.documentElement;e.highContrast?w.classList.add("high-contrast"):w.classList.remove("high-contrast"),e.reducedMotion?w.classList.add("reduced-motion"):w.classList.remove("reduced-motion"),w.className=w.className.replace(/font-size-\w+/g,""),w.classList.add(`font-size-${e.fontSize}`),localStorage.setItem("accessibilityConfig",JSON.stringify(e))},[e,s]);const a=w=>{r(f=>({...f,...w}))},i=(w,f="polite")=>{e.announceChanges&&zt.getInstance().announce(w,f)},b={config:e,updateConfig:a,announce:i,toggleHighContrast:()=>{const w=!e.highContrast;a({highContrast:w}),i(`High contrast mode ${w?"enabled":"disabled"}`)},toggleReducedMotion:()=>{const w=!e.reducedMotion;a({reducedMotion:w}),i(`Reduced motion mode ${w?"enabled":"disabled"}`)},setFontSize:w=>{a({fontSize:w}),i(`Font size set to ${w}`)},saveFocus:()=>{gt.getInstance().saveFocus()},restoreFocus:()=>{gt.getInstance().restoreFocus()}};return o.jsx(ni.Provider,{value:b,children:t})}function ii({language:t,setLanguage:e}){const[r,s]=O.useState(!1),n=Kt(),{state:a,logout:i}=Ot(),c=[{name:"Home",href:"/",icon:Pe},{name:"Map",href:"/map",icon:Pe},{name:"Report",href:"/report",icon:Vr}],p=a.isAuthenticated?[{name:"Profile",href:"/profile",icon:le},{name:"Logout",href:"#",icon:Kr,action:i}]:[{name:"Login",href:"/login",icon:le}],d=l=>n.pathname===l;return o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",role:"banner",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs(ge,{to:"/",className:"flex items-center space-x-2","aria-label":"Smart Matatu - Home",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:o.jsx(Pe,{className:"w-5 h-5 text-white","aria-hidden":"true"})}),o.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Smart Matatu"})]}),o.jsxs("nav",{className:"hidden md:flex items-center space-x-8",role:"navigation","aria-label":"Main navigation",children:[c.map(l=>{const y=l.icon;return o.jsxs(ge,{to:l.href,className:`nav-link flex items-center space-x-1 ${d(l.href)?"nav-link-active":""}`,"aria-current":d(l.href)?"page":void 0,children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name)}),p.map(l=>{const y=l.icon;return l.action?o.jsxs("button",{onClick:l.action,className:"nav-link flex items-center space-x-1",children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name):o.jsxs(ge,{to:l.href,className:`nav-link flex items-center space-x-1 ${d(l.href)?"nav-link-active":""}`,"aria-current":d(l.href)?"page":void 0,children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name)})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[a.isAuthenticated&&a.user&&o.jsxs("div",{className:"hidden md:block text-sm text-gray-600",children:["Welcome, ",a.user.displayName]}),o.jsx("button",{onClick:()=>e(t==="en"?"sw":"en"),className:"btn btn-ghost btn-sm","aria-label":`Switch to ${t==="en"?"Swahili":"English"}`,children:t==="en"?"SW":"EN"}),o.jsx("button",{onClick:()=>s(!r),className:"md:hidden btn btn-ghost btn-sm","aria-expanded":r,"aria-controls":"mobile-menu","aria-label":r?"Close menu":"Open menu",children:r?o.jsx(Gr,{className:"w-5 h-5","aria-hidden":"true"}):o.jsx(Jr,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),r&&o.jsx("div",{id:"mobile-menu",className:"md:hidden border-t border-gray-200",role:"navigation","aria-label":"Mobile navigation",children:o.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[c.map(l=>{const y=l.icon;return o.jsxs(ge,{to:l.href,className:`nav-link flex items-center space-x-2 w-full ${d(l.href)?"nav-link-active":""}`,onClick:()=>s(!1),"aria-current":d(l.href)?"page":void 0,children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name)}),p.map(l=>{const y=l.icon;return l.action?o.jsxs("button",{onClick:()=>{var b;(b=l.action)==null||b.call(l),s(!1)},className:"nav-link flex items-center space-x-2 w-full",children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name):o.jsxs(ge,{to:l.href,className:`nav-link flex items-center space-x-2 w-full ${d(l.href)?"nav-link-active":""}`,onClick:()=>s(!1),"aria-current":d(l.href)?"page":void 0,children:[o.jsx(y,{className:"w-4 h-4","aria-hidden":"true"}),o.jsx("span",{children:l.name})]},l.name)})]})})]})})}function oi({language:t,setLanguage:e}){var g,S;const[r,s]=O.useState(!1),n=Kt(),{state:a,logout:i}=Ot(),c=v=>n.pathname===v,p=()=>{var x;const v=(x=a.user)==null?void 0:x.role,E=[{name:"Dashboard",href:"/",icon:Wr},{name:"Map",href:"/map",icon:Pe},{name:"Report",href:"/report",icon:Vr}];switch(v){case"admin":return[...E,{name:"Analytics",href:"/analytics",icon:ze},{name:"SACCO Dashboard",href:"/sacco",icon:it},{name:"Authority Dashboard",href:"/authority",icon:at},{name:"Admin Panel",href:"/admin",icon:ar},{name:"Profile",href:"/profile",icon:le}];case"sacco":return[...E,{name:"SACCO Dashboard",href:"/sacco",icon:it},{name:"Analytics",href:"/analytics",icon:ze},{name:"Profile",href:"/profile",icon:le}];case"authority":return[...E,{name:"Authority Dashboard",href:"/authority",icon:at},{name:"Analytics",href:"/analytics",icon:ze},{name:"Profile",href:"/profile",icon:le}];case"moderator":return[...E,{name:"Analytics",href:"/analytics",icon:ze},{name:"Admin Panel",href:"/admin",icon:ar},{name:"Profile",href:"/profile",icon:le}];default:return[...E,{name:"Analytics",href:"/analytics",icon:ze},{name:"Profile",href:"/profile",icon:le}]}},d=()=>{var E;switch((E=a.user)==null?void 0:E.role){case"admin":return[{name:"Favorites",href:"/profile?tab=favorites",icon:ot},{name:"Reports",href:"/profile?tab=reports",icon:ct},{name:"Safety",href:"/profile?tab=safety",icon:lt},{name:"Predictions",href:"/analytics",icon:ir},{name:"SACCO Management",href:"/sacco",icon:it},{name:"Authority Tools",href:"/authority",icon:at}];case"sacco":return[{name:"Favorites",href:"/profile?tab=favorites",icon:ot},{name:"Reports",href:"/profile?tab=reports",icon:ct},{name:"Safety",href:"/profile?tab=safety",icon:lt},{name:"Fleet Management",href:"/sacco",icon:it}];case"authority":return[{name:"Favorites",href:"/profile?tab=favorites",icon:ot},{name:"Reports",href:"/profile?tab=reports",icon:ct},{name:"Safety",href:"/profile?tab=safety",icon:lt},{name:"Compliance",href:"/authority",icon:at}];default:return[{name:"Favorites",href:"/profile?tab=favorites",icon:ot},{name:"Reports",href:"/profile?tab=reports",icon:ct},{name:"Safety",href:"/profile?tab=safety",icon:lt},{name:"Predictions",href:"/analytics",icon:ir}]}},l=()=>{var E;switch((E=a.user)==null?void 0:E.role){case"admin":return"Administrator";case"sacco":return"SACCO Manager";case"authority":return"Transport Authority";case"moderator":return"Moderator";default:return"User"}},y=()=>{var E;switch((E=a.user)==null?void 0:E.role){case"admin":return"bg-purple-100 text-purple-800";case"sacco":return"bg-blue-100 text-blue-800";case"authority":return"bg-red-100 text-red-800";case"moderator":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=p(),w=d(),f=()=>{s(!r)},m=()=>{i(),s(!1)};return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:f,className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-label":"Open sidebar",children:o.jsx(Jr,{className:"h-6 w-6"})}),o.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${r?"translate-x-0":"-translate-x-full"}`,children:[o.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ls,{className:"h-8 w-8 text-blue-600"}),o.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:t==="sw"?"Matatu Smart":"Smart Matatu"})]}),o.jsx("button",{onClick:f,className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:o.jsx(Gr,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(le,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((g=a.user)==null?void 0:g.displayName)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:((S=a.user)==null?void 0:S.email)||"user@example.com"}),o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y()}`,children:l()})]})]})}),o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Language:"}),o.jsx("button",{onClick:()=>e(t==="en"?"sw":"en"),className:"px-3 py-1 text-xs font-medium rounded-md bg-blue-100 text-blue-800 hover:bg-blue-200",children:t==="en"?"EN":"SW"})]})}),o.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:[o.jsx("div",{className:"space-y-1",children:b.map(v=>o.jsxs(ge,{to:v.href,onClick:()=>s(!1),className:`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${c(v.href)?"bg-blue-100 text-blue-900":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[o.jsx(v.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),v.name]},v.name))}),o.jsxs("div",{className:"pt-4",children:[o.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Quick Actions"}),o.jsx("div",{className:"mt-2 space-y-1",children:w.map(v=>o.jsxs(ge,{to:v.href,onClick:()=>s(!1),className:"group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[o.jsx(v.icon,{className:"mr-3 h-4 w-4 flex-shrink-0"}),v.name]},v.name))})]})]}),o.jsx("div",{className:"p-4 border-t border-gray-200",children:o.jsxs("button",{onClick:m,className:"group flex items-center w-full px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[o.jsx(Kr,{className:"mr-3 h-5 w-5 flex-shrink-0"}),t==="sw"?"Ondoka":"Logout"]})})]})]}),r&&o.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:f})]})}function _r(){return o.jsx("footer",{className:"bg-gray-900 text-white",role:"contentinfo",children:o.jsxs("div",{className:"container py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:o.jsx(Pe,{className:"w-5 h-5 text-white","aria-hidden":"true"})}),o.jsx("span",{className:"text-xl font-bold",children:"Smart Matatu"})]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Making Nairobi's transport system more reliable, safe, and accessible for everyone."}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Visit our website",children:o.jsx(Us,{className:"w-5 h-5","aria-hidden":"true"})}),o.jsx("a",{href:"mailto:contact@smart-matatu.ke",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Send us an email",children:o.jsx(or,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),o.jsx("nav",{"aria-label":"Footer navigation",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Home"})}),o.jsx("li",{children:o.jsx("a",{href:"/map",className:"text-gray-400 hover:text-white transition-colors",children:"Map"})}),o.jsx("li",{children:o.jsx("a",{href:"/report",className:"text-gray-400 hover:text-white transition-colors",children:"Report"})}),o.jsx("li",{children:o.jsx("a",{href:"/login",className:"text-gray-400 hover:text-white transition-colors",children:"Login"})})]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Services"}),o.jsx("nav",{"aria-label":"Services navigation",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Route Planning"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Safety Reports"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Real-time Updates"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Analytics"})})]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),o.jsx("address",{className:"not-italic",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Pe,{className:"w-4 h-4 text-gray-400","aria-hidden":"true"}),o.jsx("span",{className:"text-gray-400",children:"Western Heights, Muthithi Rd, Westlands"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(or,{className:"w-4 h-4 text-gray-400","aria-hidden":"true"}),o.jsx("button",{onClick:()=>{window.location.href="mailto:contact@smart-matatu.ke?subject=Smart Matatu Inquiry&body=Hello, I would like to get in touch regarding Smart Matatu services."},className:"text-gray-400 hover:text-white transition-colors text-left",children:"contact@smart-matatu.ke"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Ms,{className:"w-4 h-4 text-gray-400","aria-hidden":"true"}),o.jsx("button",{onClick:()=>window.open("tel:+254763612953","_blank"),className:"text-gray-400 hover:text-white transition-colors text-left",children:"+254 763 612 953"})]})]})})]})]}),o.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[o.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 Smart Matatu. All rights reserved."}),o.jsxs("nav",{className:"flex space-x-6 mt-4 md:mt-0","aria-label":"Legal links",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Privacy Policy"}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Terms of Service"})]})]})})]})})}function Zt({size:t="md",text:e,className:r=""}){const s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return o.jsxs("div",{className:`flex flex-col items-center justify-center ${r}`,children:[o.jsx("div",{className:`loading-spinner ${s[t]}`}),e&&o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:e})]})}function ci({children:t}){const{state:e,setLanguage:r}=Ot();return e.isLoading?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Zt,{}),o.jsx("p",{className:"text-gray-600 mt-4",children:"Loading Smart Matatu..."})]})}):e.isAuthenticated?o.jsxs("div",{className:"min-h-screen flex",children:[o.jsx(oi,{language:e.language,setLanguage:r}),o.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[o.jsx("main",{className:"flex-1",children:t}),o.jsx(_r,{})]})]}):o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx(ii,{language:e.language,setLanguage:r}),o.jsx("main",{className:"flex-1",children:t}),o.jsx(_r,{})]})}const be=class be{constructor(){B(this,"errors",[]);B(this,"maxErrors",100)}static getInstance(){return be.instance||(be.instance=new be),be.instance}logError(e,r,s){const n={code:this.generateErrorCode(e),message:e.message,details:{...s,stack:e.stack,errorInfo:r},timestamp:new Date().toISOString(),userId:this.getCurrentUserId(),sessionId:this.getSessionId(),url:window.location.href,userAgent:navigator.userAgent};this.errors.push(n),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(-this.maxErrors)),this.sendToErrorService(n)}getErrors(){return[...this.errors]}clearErrors(){this.errors=[]}generateErrorCode(e){const r=e.constructor.name,s=this.hashString(e.message);return`${r}-${s}`}hashString(e){let r=0;for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);r=(r<<5)-r+n,r=r&r}return Math.abs(r).toString(36)}getCurrentUserId(){try{const e=localStorage.getItem("user");return e?JSON.parse(e)._id:void 0}catch{return}}getSessionId(){let e=sessionStorage.getItem("sessionId");return e||(e=this.generateSessionId(),sessionStorage.setItem("sessionId",e)),e}generateSessionId(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}async sendToErrorService(e){try{console.log("Sending error to service:",e)}catch(r){console.error("Failed to send error to service:",r)}}};B(be,"instance");let xt=be;const k={NETWORK:"NETWORK_ERROR",VALIDATION:"VALIDATION_ERROR",AUTHENTICATION:"AUTHENTICATION_ERROR",AUTHORIZATION:"AUTHORIZATION_ERROR",NOT_FOUND:"NOT_FOUND_ERROR",SERVER:"SERVER_ERROR",CLIENT:"CLIENT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},kr={[k.NETWORK]:"Network connection failed. Please check your internet connection.",[k.VALIDATION]:"Please check your input and try again.",[k.AUTHENTICATION]:"Please log in to continue.",[k.AUTHORIZATION]:"You do not have permission to perform this action.",[k.NOT_FOUND]:"The requested resource was not found.",[k.SERVER]:"Server error occurred. Please try again later.",[k.CLIENT]:"An error occurred. Please refresh the page.",[k.UNKNOWN]:"An unexpected error occurred. Please try again."};function li(t){var e,r,s;if((e=t==null?void 0:t.response)!=null&&e.status){const n=t.response.status;if(n>=500)return k.SERVER;if(n===404)return k.NOT_FOUND;if(n===401)return k.AUTHENTICATION;if(n===403)return k.AUTHORIZATION;if(n>=400)return k.CLIENT}return(t==null?void 0:t.code)==="NETWORK_ERROR"||(r=t==null?void 0:t.message)!=null&&r.includes("Network Error")?k.NETWORK:(t==null?void 0:t.name)==="ValidationError"||(s=t==null?void 0:t.message)!=null&&s.includes("validation")?k.VALIDATION:k.UNKNOWN}function ui(t){const e=li(t);return kr[e]||kr[k.UNKNOWN]}function hi(){const t=xt.getInstance();window.addEventListener("unhandledrejection",e=>{t.logError(new Error(e.reason),null,{type:"unhandledrejection",reason:e.reason})}),window.addEventListener("error",e=>{t.logError(e.error||new Error(e.message),null,{type:"uncaught",filename:e.filename,lineno:e.lineno,colno:e.colno})})}class di extends O.Component{constructor(r){super(r);B(this,"maxRetries",3);B(this,"handleRetry",()=>{this.state.retryCount<this.maxRetries?this.setState(r=>({hasError:!1,error:null,errorInfo:null,retryCount:r.retryCount+1})):this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0})});B(this,"handleGoHome",()=>{window.location.href="/"});B(this,"handleReportError",()=>{const{error:r,errorInfo:s}=this.state;r&&(console.log("Reporting error:",{error:r,errorInfo:s}),alert("Error reported. Thank you for helping us improve!"))});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){xt.getInstance().logError(r,s,{component:"EnhancedErrorBoundary",retryCount:this.state.retryCount}),this.setState({error:r,errorInfo:s}),this.props.onError&&this.props.onError(r,s)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:r}=this.state,s=r?ui(r):"An unexpected error occurred",n=this.state.retryCount<this.maxRetries;return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:o.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:o.jsx(qs,{className:"h-6 w-6 text-red-600"})}),o.jsx("h1",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),o.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s}),o.jsxs("div",{className:"space-y-3",children:[n&&o.jsxs("button",{onClick:this.handleRetry,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[o.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Try Again"]}),o.jsxs("button",{onClick:this.handleGoHome,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[o.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Go Home"]}),o.jsxs("button",{onClick:this.handleReportError,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[o.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Report Error"]})]}),this.props.showDetails&&this.state.error&&o.jsxs("details",{className:"mt-6 text-left",children:[o.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Technical Details"}),o.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded-md text-xs font-mono text-gray-700 overflow-auto max-h-32",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("strong",{children:"Error:"})," ",this.state.error.message]}),this.state.error.stack&&o.jsxs("div",{children:[o.jsx("strong",{children:"Stack:"}),o.jsx("pre",{className:"whitespace-pre-wrap mt-1",children:this.state.error.stack})]})]})]}),o.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Retry attempt: ",this.state.retryCount+1," of ",this.maxRetries+1]})]})})})}return this.props.children}}function Ke({children:t,allowedRoles:e=[],requireAuth:r=!0}){var a;const{state:s}=Ot(),n=Kt();if(s.isLoading)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Zt,{}),o.jsx("p",{className:"text-gray-600 mt-4",children:"Loading..."})]})});if(r&&!s.isAuthenticated)return o.jsx(nr,{to:"/login",state:{from:n},replace:!0});if(r&&e.length>0&&((a=s.user)!=null&&a.role)&&!e.includes(s.user.role)){const i=fi(s.user.role);return o.jsx(nr,{to:i,replace:!0})}return o.jsx(o.Fragment,{children:t})}function fi(t){switch(t){case"admin":return"/admin";case"sacco":return"/sacco";case"authority":return"/authority";case"moderator":return"/admin";default:return"/"}}const pi=O.lazy(()=>re(()=>import("./HomePage-BY794BFf.js"),__vite__mapDeps([0,1,2,3]))),mi=O.lazy(()=>re(()=>import("./MapView-C9Vjfkzg.js"),__vite__mapDeps([4,1,5,3,2,6]))),yi=O.lazy(()=>re(()=>import("./ReportForm-BG3KLKJz.js"),__vite__mapDeps([7,1,2,3]))),gi=O.lazy(()=>re(()=>import("./Login-Dk8gCJil.js"),__vite__mapDeps([8,1,2,3]))),xi=O.lazy(()=>re(()=>import("./Signup-Bv1-dPX6.js"),__vite__mapDeps([9,1,2,3]))),wi=O.lazy(()=>re(()=>import("./Profile-BlIhKsQU.js"),__vite__mapDeps([10,1,2,3]))),bi=O.lazy(()=>re(()=>import("./Admin-Dkh7Mg6H.js"),__vite__mapDeps([11,1,3,2]))),Ei=O.lazy(()=>re(()=>import("./AnalyticsDashboard-DJiifHZU.js"),__vite__mapDeps([12,1,3,2]))),Si=O.lazy(()=>re(()=>import("./SaccoDashboard-BuAdvtDB.js"),__vite__mapDeps([13,1,3,2]))),vi=O.lazy(()=>re(()=>import("./AuthorityDashboard-GcRlN6Xb.js"),__vite__mapDeps([14,1,3,2])));function Ri(){return Qr.useEffect(()=>{hi()},[]),o.jsx(di,{showDetails:!1,children:o.jsx(ai,{children:o.jsx(si,{children:o.jsx(ci,{children:o.jsx(O.Suspense,{fallback:o.jsx(Zt,{}),children:o.jsxs(ks,{children:[o.jsx(X,{path:"/",element:o.jsx(pi,{})}),o.jsx(X,{path:"/map",element:o.jsx(mi,{})}),o.jsx(X,{path:"/report",element:o.jsx(yi,{})}),o.jsx(X,{path:"/login",element:o.jsx(gi,{})}),o.jsx(X,{path:"/signup",element:o.jsx(xi,{})}),o.jsx(X,{path:"/profile",element:o.jsx(Ke,{requireAuth:!0,children:o.jsx(wi,{})})}),o.jsx(X,{path:"/analytics",element:o.jsx(Ke,{requireAuth:!0,children:o.jsx(Ei,{})})}),o.jsx(X,{path:"/admin",element:o.jsx(Ke,{requireAuth:!0,allowedRoles:["admin","moderator"],children:o.jsx(bi,{})})}),o.jsx(X,{path:"/sacco",element:o.jsx(Ke,{requireAuth:!0,allowedRoles:["sacco","admin"],children:o.jsx(Si,{})})}),o.jsx(X,{path:"/authority",element:o.jsx(Ke,{requireAuth:!0,allowedRoles:["authority","admin"],children:o.jsx(vi,{})})})]})})})})})})}const Ni=new En({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}});_t.createRoot(document.getElementById("root")).render(o.jsx(Qr.StrictMode,{children:o.jsx(vn,{client:Ni,children:o.jsx(Ds,{children:o.jsx(Ri,{})})})}));export{Zt as L,It as a,o as j,Ot as u};
//# sourceMappingURL=index-BdmTiAy5.js.map
