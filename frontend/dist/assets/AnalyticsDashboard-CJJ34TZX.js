import{u as v,b as f,a as o,j as e}from"./index-BRy-12qz.js";import{r as i}from"./vendor-BKU87Gzz.js";import"./router-BF-yxxER.js";import"./icons-B9e0n2uV.js";const k=()=>{const{t:a}=v(),{state:c}=f(),[r,h]=i.useState(null),[p,d]=i.useState(!0),[l,g]=i.useState("7d"),[n,x]=i.useState(null);i.useEffect(()=>{m()},[l]);const m=async()=>{try{d(!0),x(null);const s=await o.getAnalyticsDashboard(l);h(s.data||null)}catch(s){x(s instanceof Error?s.message:"Failed to load analytics data")}finally{d(!1)}},y=async()=>{if(c.user)try{await o.trackEvent("page_view",{page:"analytics_dashboard",timestamp:new Date().toISOString()},void 0,c.user._id)}catch(s){console.error("Failed to track page view:",s)}};i.useEffect(()=>{y()},[]);const u=(s,t)=>{switch(s){case"api_response_time":return`${t.toFixed(2)}ms`;case"page_load_time":return`${t.toFixed(2)}s`;case"error_rate":return`${(t*100).toFixed(2)}%`;case"user_engagement":return t.toFixed(1);default:return t.toString()}},j=(s,t)=>{switch(s){case"api_response_time":return t<200?"text-green-600":t<500?"text-yellow-600":"text-red-600";case"page_load_time":return t<2?"text-green-600":t<5?"text-yellow-600":"text-red-600";case"error_rate":return t<.01?"text-green-600":t<.05?"text-yellow-600":"text-red-600";case"user_engagement":return t>5?"text-green-600":t>2?"text-yellow-600":"text-red-600";default:return"text-gray-600"}},N=s=>{switch(s){case"api_response_time":return a("analyticsDashboard.metricTypes.apiResponseTime");case"page_load_time":return a("analyticsDashboard.metricTypes.pageLoadTime");case"error_rate":return a("analyticsDashboard.metricTypes.errorRate");case"user_engagement":return a("analyticsDashboard.metricTypes.userEngagement");default:return s.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())}};return p?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:a("common.loading")})]})}):n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-6 max-w-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:a("analyticsDashboard.error")}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:n}),e.jsx("button",{onClick:m,className:"mt-3 bg-red-100 text-red-800 px-3 py-1 rounded-md text-sm hover:bg-red-200",children:a("common.retry")})]})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a("analyticsDashboard.title")}),e.jsx("p",{className:"mt-2 text-gray-600",children:a("analyticsDashboard.subtitle")})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("select",{value:l,onChange:s=>g(s.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"7d",children:a("analyticsDashboard.last7Days")}),e.jsx("option",{value:"30d",children:a("analyticsDashboard.last30Days")})]})})]})}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a("analyticsDashboard.userMetrics.totalUsers")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.userMetrics.totalUsers})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a("analyticsDashboard.reportMetrics.totalReports")}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.reportMetrics.totalReports})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a("analyticsDashboard.ratingMetrics.averageRating")}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900",children:[r.ratingMetrics.averageRating.toFixed(1),"/5"]})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsxs("dt",{className:"text-sm font-medium text-gray-500 truncate",children:[a("analyticsDashboard.paymentMetrics.totalRevenue")," (KES)"]}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r.paymentMetrics.totalRevenue.toLocaleString()})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.reportMetrics.reportsByType")}),e.jsx("div",{className:"space-y-3",children:r.reportMetrics.reportsByType.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:a(`analyticsDashboard.reportTypes.${s.type}`)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.count})]},s.type))})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.reportMetrics.reportsBySeverity")}),e.jsx("div",{className:"space-y-3",children:r.reportMetrics.reportsBySeverity.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${s.severity==="critical"?"bg-red-600":s.severity==="high"?"bg-orange-500":s.severity==="medium"?"bg-yellow-500":"bg-green-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:a(`analyticsDashboard.severityLevels.${s.severity}`)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.count})]},s.severity))})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg mb-8",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.ratingMetrics.topRatedRoutes")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.ratingMetrics.routeName")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.ratingMetrics.operator")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.ratingMetrics.avgRating")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.ratingMetrics.totalRatings")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.ratingMetrics.topRatedRoutes.slice(0,10).map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s.routeNumber," - ",s.routeName]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.operator}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-400",children:"â˜…"}),e.jsx("span",{className:"ml-1",children:s.avgRating.toFixed(1)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.totalRatings})]},s._id))})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.userMetrics.userRoles")}),e.jsx("div",{className:"space-y-3",children:r.userMetrics.userRoles.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:a(`analyticsDashboard.userRoles.${s.role}`)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.count})]},s.role))})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.subscriptionMetrics.subscriptionsByPlan")}),e.jsx("div",{className:"space-y-3",children:r.subscriptionMetrics.subscriptionsByPlan.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:a(`analyticsDashboard.subscriptionPlans.${s.plan}`)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:s.count})]},s.plan))})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:a("analyticsDashboard.performanceMetrics")}),r.performanceMetrics.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.metric")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.value")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.endpoint")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("analyticsDashboard.timestamp")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.performanceMetrics.slice(0,10).map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize",children:N(s.metricType)}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${j(s.metricType,s.value)}`,children:u(s.metricType,s.value)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.endpoint||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.timestamp).toLocaleString()})]},t))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:a("analyticsDashboard.noMetrics")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("analyticsDashboard.noMetricsDesc")})]})]})})]})]})})};export{k as default};
//# sourceMappingURL=AnalyticsDashboard-CJJ34TZX.js.map
