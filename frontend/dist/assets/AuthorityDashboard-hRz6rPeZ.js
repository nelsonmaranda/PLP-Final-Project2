import{a as O,j as e}from"./index-Ca5w2wSI.js";import{r as a}from"./vendor-BKU87Gzz.js";import{R as S,B as C,f as A,A as N,a1 as E,E as $,S as Q,c as M,y as F,T as J,a2 as f}from"./icons-B_aqzpWL.js";import"./router-Z6rqMkFf.js";function V(){const[l,R]=a.useState("overview"),[D,b]=a.useState(!0),[i,m]=a.useState([]),[o,h]=a.useState([]),[t,p]=a.useState(null),[L,g]=a.useState([]),[v,k]=a.useState("30d"),[n,T]=a.useState("all"),[c,U]=a.useState("all");a.useEffect(()=>{w()},[v,n,c]);const w=async()=>{try{b(!0);const s=await O.getAuthorityDashboard();if(s.success&&s.data){const{complianceData:y,safetyIncidents:u,systemMetrics:x,auditLogs:r}=s.data;m(y||[]),h(u||[]),p(x||null),g(r||[])}else m([]),h([]),p(null),g([])}catch(s){console.error("Error loading dashboard data:",s),m([]),h([]),p(null),g([])}finally{b(!1)}},d=s=>{switch(s){case"compliant":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"non-compliant":return"text-red-600 bg-red-100";case"valid":return"text-green-600 bg-green-100";case"expired":return"text-red-600 bg-red-100";case"pending":return"text-yellow-600 bg-yellow-100";case"reported":return"text-blue-600 bg-blue-100";case"investigating":return"text-yellow-600 bg-yellow-100";case"resolved":return"text-green-600 bg-green-100";case"closed":return"text-gray-600 bg-gray-100";case"success":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"warning":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},I=s=>{switch(s){case"low":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"high":return"text-orange-600 bg-orange-100";case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=s=>{const y=s==="compliance"?i:o,u=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),x=URL.createObjectURL(u),r=document.createElement("a");r.href=x,r.download=`${s}-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(x)};return D?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading Authority Dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transport Authority Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor compliance, safety, and system oversight"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:v,onChange:s=>k(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Overview",icon:C},{id:"compliance",name:"Compliance",icon:A},{id:"incidents",name:"Safety Incidents",icon:N},{id:"reports",name:"Reports & Export",icon:E},{id:"audit",name:"Audit Logs",icon:$},{id:"system",name:"System Health",icon:Q}].map(s=>e.jsxs("button",{onClick:()=>R(s.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${l===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),e.jsx("span",{children:s.name})]},s.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total SACCOs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Compliant SACCOs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(s=>s.status==="compliant").length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(N,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Incidents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.filter(s=>s.status!=="resolved"&&s.status!=="closed").length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Uptime"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t==null?void 0:t.systemUptime,"%"]})]})]})})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("span",{className:"text-lg font-semibold",children:t.totalUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Reports"}),e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.activeReports})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Routes"}),e.jsx("span",{className:"text-lg font-semibold",children:t.totalRoutes})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data Quality"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[t.dataQuality,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"System Uptime"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[t.systemUptime,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Response Time"}),e.jsxs("span",{className:"text-lg font-semibold",children:[t.averageResponseTime,"s"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data Quality"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[t.dataQuality,"%"]})]})]})]})]})]}),l==="compliance"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SACCO Compliance Status"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SACCO"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"License Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Safety Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Incidents"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Violations"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Inspection"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.saccoName})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(s.licenseStatus)}`,children:s.licenseStatus})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.safetyScore}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[s.safetyScore,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.incidentCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.violations}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.lastInspection).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(s.status)}`,children:s.status})})]},s.saccoId))})]})})]}),l==="incidents"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Safety Incidents"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("select",{value:n,onChange:s=>T(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Severity"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]}),e.jsxs("select",{value:c,onChange:s=>U(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"reported",children:"Reported"}),e.jsx("option",{value:"investigating",children:"Investigating"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:o.filter(s=>(n==="all"||s.severity===n)&&(c==="all"||s.status===c)).map(s=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.routeName}),e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.saccoName})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{className:"capitalize",children:s.type}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.location}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.reportedAt).toLocaleDateString()}),s.assignedTo&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Assigned to: ",s.assignedTo]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I(s.severity)}`,children:s.severity}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(s.status)}`,children:s.status})]})]})},s.id))})]})}),l==="reports"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export & Reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(A,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Compliance Report"}),e.jsx("p",{className:"text-sm text-gray-500",children:"SACCO compliance data"})]})]}),e.jsxs("button",{onClick:()=>j("compliance"),className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:"Export JSON"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(N,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Safety Incidents"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Incident reports and data"})]})]}),e.jsxs("button",{onClick:()=>j("incidents"),className:"w-full flex items-center justify-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:"Export JSON"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(C,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"System Analytics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Performance metrics"})]})]}),e.jsxs("button",{onClick:()=>j("analytics"),className:"w-full flex items-center justify-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:"Export JSON"})]})]})]})]})}),l==="audit"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Audit Logs"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.action}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.user}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.timestamp).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.details}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.ipAddress}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(s.status)}`,children:s.status})})]},s.id))})]})})]}),l==="system"&&t&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"System Uptime"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[t.systemUptime,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data Quality"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[t.dataQuality,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Response Time"}),e.jsxs("span",{className:"text-lg font-semibold",children:[t.averageResponseTime,"s"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Activity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("span",{className:"text-lg font-semibold",children:t.totalUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Reports"}),e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.activeReports})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Routes"}),e.jsx("span",{className:"text-lg font-semibold",children:t.totalRoutes})]})]})]})]})})]})]})}export{V as default};
//# sourceMappingURL=AuthorityDashboard-hRz6rPeZ.js.map
