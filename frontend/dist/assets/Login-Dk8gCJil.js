import{u as w,j as e,a as b}from"./index-BdmTiAy5.js";import{r as a}from"./vendor-BKU87Gzz.js";import{b as S,L as m}from"./router-Z6rqMkFf.js";import{h as p,o as k,s as L,t as E,u as C,E as D,q as F,v as P}from"./icons-V--AQo_U.js";function T(){const{setUser:j}=w(),f=S(),[i,x]=a.useState(!1),[t,g]=a.useState(!1),[r,l]=a.useState(null),[n,c]=a.useState(!1),[o,u]=a.useState({email:"",password:""}),h=a.useCallback(d=>{const{name:s,value:v}=d.target;u(y=>({...y,[s]:v})),r&&l(null),n&&c(!1)},[r,n]),N=async d=>{d.preventDefault(),x(!0),l(null),c(!1);try{const s=await b.login(o);console.log("Login response:",s),s.success&&s.data&&s.data.user&&s.data.token?(console.log("Login successful, setting user:",s.data.user),j(s.data.user),c(!0),u({email:"",password:""}),setTimeout(()=>{f("/")},1500)):(console.log("Login validation failed:",{success:s.success,hasData:!!s.data,hasUser:!!(s.data&&s.data.user),hasToken:!!(s.data&&s.data.token)}),l("Invalid email or password. Please check your credentials."))}catch(s){console.error("Login error:",s),l("Invalid email or password. Please check your credentials.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(m,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"Smart Matatu"})]})}),e.jsx("h1",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Welcome back"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account to continue"})]}),e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-content",children:[r&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(k,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:r})})]})}),n&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(L,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Login successful! Welcome back to Smart Matatu."})})]})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(p,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:o.email,onChange:h,className:"form-input pl-10",placeholder:"Enter your email",required:!0,"aria-describedby":"email-help"})]}),e.jsx("p",{id:"email-help",className:"sr-only",children:"Enter your email address to sign in"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{id:"password",name:"password",type:t?"text":"password",autoComplete:"current-password",value:o.password,onChange:h,className:"form-input pl-10 pr-10",placeholder:"Enter your password",required:!0,"aria-describedby":"password-help"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!t),"aria-label":t?"Hide password":"Show password",children:t?e.jsx(C,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}):e.jsx(D,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e.jsx("p",{id:"password-help",className:"sr-only",children:"Enter your password to sign in"})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"btn btn-primary w-full","aria-label":i?"Signing in...":"Sign in to your account",children:i?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin","aria-hidden":"true"}),"Signing in..."]}):"Sign in"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(m,{to:"/signup",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up here"})]})})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(m,{to:"/",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Back to home"]})})]})]})}export{T as default};
//# sourceMappingURL=Login-Dk8gCJil.js.map
