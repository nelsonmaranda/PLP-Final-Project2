{"version":3,"file":"AnalyticsDashboard-kObbn2Ri.js","sources":["../../src/screens/AnalyticsDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useApp } from '../contexts/AppContext'\r\nimport { useTranslation } from '../hooks/useTranslation'\r\nimport apiService from '../services/api'\r\n\r\ninterface AnalyticsData {\r\n  userMetrics: {\r\n    totalUsers: number\r\n    activeUsers: number\r\n    newUsers: number\r\n    userRoles: { role: string; count: number }[]\r\n  }\r\n  routeMetrics: {\r\n    totalRoutes: number\r\n    activeRoutes: number\r\n    topOperators: { _id: string; count: number }[]\r\n  }\r\n  reportMetrics: {\r\n    totalReports: number\r\n    recentReports: number\r\n    reportsByType: { type: string; count: number }[]\r\n    reportsBySeverity: { severity: string; count: number }[]\r\n    reportsByStatus: { status: string; count: number }[]\r\n  }\r\n  ratingMetrics: {\r\n    totalRatings: number\r\n    averageRating: number\r\n    topRatedRoutes: {\r\n      _id: string\r\n      routeName: string\r\n      routeNumber: string\r\n      operator: string\r\n      avgRating: number\r\n      totalRatings: number\r\n    }[]\r\n  }\r\n  subscriptionMetrics: {\r\n    totalSubscriptions: number\r\n    activeSubscriptions: number\r\n    subscriptionsByPlan: { plan: string; count: number }[]\r\n  }\r\n  paymentMetrics: {\r\n    totalPayments: number\r\n    successfulPayments: number\r\n    successRate: string\r\n    totalRevenue: number\r\n    paymentsByMethod: { method: string; count: number; total: number }[]\r\n  }\r\n  trafficMetrics: {\r\n    totalRoutesWithTraffic: number\r\n    averageCongestion: number\r\n    trafficData: {\r\n      routeName: string\r\n      routeNumber: string\r\n      operator: string\r\n      congestionIndex: number\r\n      trafficFactor: number\r\n    }[]\r\n  }\r\n  geographicAnalytics: {\r\n    reportHotspots: { _id: { lat: number; lng: number }; count: number }[]\r\n  }\r\n  timeAnalytics: {\r\n    reportsByHour: { hour: number; count: number }[]\r\n  }\r\n  performanceMetrics: {\r\n    metricType: string\r\n    value: number\r\n    endpoint?: string\r\n    timestamp: string\r\n    metadata?: any\r\n  }[]\r\n}\r\n\r\nconst AnalyticsDashboard: React.FC = () => {\r\n  const { t } = useTranslation()\r\n  const { state } = useApp()\r\n  const [analyticsData, setAnalyticsData] = useState<AnalyticsData | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [period, setPeriod] = useState('7d')\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    loadAnalytics()\r\n  }, [period])\r\n\r\n  const loadAnalytics = async () => {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n      \r\n      const response = await apiService.getAnalyticsDashboard(period)\r\n      const payload: any = (response as any)?.data ?? response\r\n\r\n      if (!payload) {\r\n        setAnalyticsData(null)\r\n        return\r\n      }\r\n\r\n      // Map backend shape → UI shape defensively\r\n      const mapped: AnalyticsData = {\r\n        userMetrics: {\r\n          totalUsers: Number(payload.users?.totalUsers ?? 0),\r\n          activeUsers: Number(payload.users?.activeUsers ?? 0),\r\n          newUsers: Number(payload.users?.newUsers ?? 0),\r\n          userRoles: (payload.users?.userRoles ?? []).map((r: any) => ({\r\n            role: r.role ?? r._id ?? 'unknown',\r\n            count: Number(r.count ?? 0)\r\n          }))\r\n        },\r\n        routeMetrics: {\r\n          totalRoutes: Number(payload.routes?.totalRoutes ?? 0),\r\n          activeRoutes: Number(payload.routes?.activeRoutes ?? 0),\r\n          topOperators: (payload.routes?.routesByOperator ?? []).map((o: any) => ({\r\n            _id: o._id ?? 'unknown',\r\n            count: Number(o.count ?? 0)\r\n          }))\r\n        },\r\n        reportMetrics: {\r\n          totalReports: Number(payload.reports?.totalReports ?? 0),\r\n          recentReports: Number(payload.reports?.recentReports ?? 0),\r\n          reportsByType: (payload.reports?.reportsByType ?? []).map((x: any) => ({\r\n            type: x.type ?? x._id ?? 'other',\r\n            count: Number(x.count ?? 0)\r\n          })),\r\n          reportsBySeverity: (payload.reports?.reportsBySeverity ?? []).map((x: any) => ({\r\n            severity: x.severity ?? x._id ?? 'low',\r\n            count: Number(x.count ?? 0)\r\n          })),\r\n          reportsByStatus: (payload.reports?.reportsByStatus ?? []).map((x: any) => ({\r\n            status: x.status ?? x._id ?? 'pending',\r\n            count: Number(x.count ?? 0)\r\n          }))\r\n        },\r\n        ratingMetrics: {\r\n          totalRatings: Number(payload.ratings?.totalScores ?? 0),\r\n          averageRating: Number(payload.ratings?.avgOverallRating ?? 0),\r\n          topRatedRoutes: (payload.ratings?.topRatedRoutes ?? []).map((r: any) => ({\r\n            _id: r._id,\r\n            routeName: r.routeName,\r\n            routeNumber: r.routeNumber,\r\n            operator: r.operator,\r\n            avgRating: Number(r.avgRating ?? 0),\r\n            totalRatings: Number(r.totalRatings ?? 0)\r\n          }))\r\n        },\r\n        subscriptionMetrics: {\r\n          totalSubscriptions: Number(payload.subscriptions?.totalSubscriptions ?? 0),\r\n          activeSubscriptions: Number(payload.subscriptions?.activeSubscriptions ?? 0),\r\n          subscriptionsByPlan: (payload.subscriptions?.subscriptionsByPlan ?? []).map((p: any) => ({\r\n            plan: p.plan ?? p._id ?? 'free',\r\n            count: Number(p.count ?? 0)\r\n          }))\r\n        },\r\n        paymentMetrics: {\r\n          totalPayments: Number(payload.payments?.totalPayments ?? 0),\r\n          successfulPayments: Number(payload.payments?.successfulPayments ?? 0),\r\n          successRate: payload.payments?.successRate ?? '0%',\r\n          totalRevenue: Number(payload.payments?.totalRevenue ?? 0),\r\n          paymentsByMethod: (payload.payments?.paymentsByMethod ?? []).map((m: any) => ({\r\n            method: m.method ?? 'unknown',\r\n            count: Number(m.count ?? 0),\r\n            total: Number(m.total ?? 0)\r\n          }))\r\n        },\r\n        trafficMetrics: {\r\n          totalRoutesWithTraffic: Number(payload.traffic?.totalRoutesWithTraffic ?? 0),\r\n          averageCongestion: Number(payload.traffic?.averageCongestion ?? 0),\r\n          trafficData: payload.traffic?.trafficData ?? []\r\n        },\r\n        geographicAnalytics: {\r\n          reportHotspots: payload.geographicAnalytics?.reportHotspots ?? []\r\n        },\r\n        timeAnalytics: {\r\n          reportsByHour: payload.timeAnalytics?.reportsByHour ?? []\r\n        },\r\n        performanceMetrics: payload.performanceMetrics ?? []\r\n      }\r\n\r\n      setAnalyticsData(mapped)\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load analytics data')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const trackPageView = async () => {\r\n    if (state.user) {\r\n      try {\r\n        await apiService.trackEvent('page_view', {\r\n          page: 'analytics_dashboard',\r\n          timestamp: new Date().toISOString()\r\n        }, undefined, state.user._id)\r\n      } catch (err) {\r\n        console.error('Failed to track page view:', err)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    trackPageView()\r\n  }, [])\r\n\r\n  const formatMetricValue = (metricType: string, value: number) => {\r\n    switch (metricType) {\r\n      case 'api_response_time':\r\n        return `${value.toFixed(2)}ms`\r\n      case 'page_load_time':\r\n        return `${value.toFixed(2)}s`\r\n      case 'error_rate':\r\n        return `${(value * 100).toFixed(2)}%`\r\n      case 'user_engagement':\r\n        return value.toFixed(1)\r\n      default:\r\n        return value.toString()\r\n    }\r\n  }\r\n\r\n  const getMetricColor = (metricType: string, value: number) => {\r\n    switch (metricType) {\r\n      case 'api_response_time':\r\n        return value < 200 ? 'text-green-600' : value < 500 ? 'text-yellow-600' : 'text-red-600'\r\n      case 'page_load_time':\r\n        return value < 2 ? 'text-green-600' : value < 5 ? 'text-yellow-600' : 'text-red-600'\r\n      case 'error_rate':\r\n        return value < 0.01 ? 'text-green-600' : value < 0.05 ? 'text-yellow-600' : 'text-red-600'\r\n      case 'user_engagement':\r\n        return value > 5 ? 'text-green-600' : value > 2 ? 'text-yellow-600' : 'text-red-600'\r\n      default:\r\n        return 'text-gray-600'\r\n    }\r\n  }\r\n\r\n  const getMetricTypeTranslation = (metricType: string) => {\r\n    switch (metricType) {\r\n      case 'api_response_time':\r\n        return t('analyticsDashboard.metricTypes.apiResponseTime')\r\n      case 'page_load_time':\r\n        return t('analyticsDashboard.metricTypes.pageLoadTime')\r\n      case 'error_rate':\r\n        return t('analyticsDashboard.metricTypes.errorRate')\r\n      case 'user_engagement':\r\n        return t('analyticsDashboard.metricTypes.userEngagement')\r\n      default:\r\n        return metricType.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">{t('common.loading')}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"bg-red-50 border border-red-200 rounded-md p-6 max-w-md\">\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-sm font-medium text-red-800\">\r\n                  {t('analyticsDashboard.error')}\r\n                </h3>\r\n                <p className=\"mt-1 text-sm text-red-700\">{error}</p>\r\n                <button\r\n                  onClick={loadAnalytics}\r\n                  className=\"mt-3 bg-red-100 text-red-800 px-3 py-1 rounded-md text-sm hover:bg-red-200\"\r\n                >\r\n                  {t('common.retry')}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Defensive defaults to avoid runtime crashes on partial/missing data\r\n  const userMetrics = analyticsData?.userMetrics || { totalUsers: 0, activeUsers: 0, newUsers: 0, userRoles: [] as { role: string; count: number }[] }\r\n  const reportMetrics = analyticsData?.reportMetrics || { totalReports: 0, recentReports: 0, reportsByType: [] as any[], reportsBySeverity: [] as any[], reportsByStatus: [] as any[] }\r\n  const ratingMetrics = analyticsData?.ratingMetrics || { totalRatings: 0, averageRating: 0, topRatedRoutes: [] as any[] }\r\n  const subscriptionMetrics = analyticsData?.subscriptionMetrics || { totalSubscriptions: 0, activeSubscriptions: 0, subscriptionsByPlan: [] as any[] }\r\n  const performanceMetrics = (analyticsData?.performanceMetrics || []) as { metricType: string; value: number; endpoint?: string; timestamp: string }[]\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">\r\n                {t('analyticsDashboard.title')}\r\n              </h1>\r\n              <p className=\"mt-2 text-gray-600\">\r\n                {t('analyticsDashboard.subtitle')}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"mt-4 sm:mt-0\">\r\n              <select\r\n                value={period}\r\n                onChange={(e) => setPeriod(e.target.value)}\r\n                className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md\"\r\n              >\r\n                <option value=\"7d\">{t('analyticsDashboard.last7Days')}</option>\r\n                <option value=\"30d\">{t('analyticsDashboard.last30Days')}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {(analyticsData || true) && (\r\n          <>\r\n            {/* Key Metrics */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n                <div className=\"p-5\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"h-6 w-6 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"ml-5 w-0 flex-1\">\r\n                      <dl>\r\n                        <dt className=\"text-sm font-medium text-gray-500 truncate\">\r\n                          {t('analyticsDashboard.userMetrics.totalUsers')}\r\n                        </dt>\r\n                        <dd className=\"text-lg font-medium text-gray-900\">{userMetrics.totalUsers}</dd>\r\n                      </dl>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n                <div className=\"p-5\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"h-6 w-6 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"ml-5 w-0 flex-1\">\r\n                      <dl>\r\n                        <dt className=\"text-sm font-medium text-gray-500 truncate\">\r\n                          {t('analyticsDashboard.reportMetrics.totalReports')}\r\n                        </dt>\r\n                        <dd className=\"text-lg font-medium text-gray-900\">{reportMetrics.totalReports}</dd>\r\n                      </dl>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n                <div className=\"p-5\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"h-6 w-6 text-yellow-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"ml-5 w-0 flex-1\">\r\n                      <dl>\r\n                        <dt className=\"text-sm font-medium text-gray-500 truncate\">\r\n                          {t('analyticsDashboard.ratingMetrics.averageRating')}\r\n                        </dt>\r\n                        <dd className=\"text-lg font-medium text-gray-900\">{(ratingMetrics.averageRating || 0).toFixed(1)}/5</dd>\r\n                      </dl>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n                <div className=\"p-5\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <svg className=\"h-6 w-6 text-purple-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div className=\"ml-5 w-0 flex-1\">\r\n                      <dl>\r\n                        <dt className=\"text-sm font-medium text-gray-500 truncate\">\r\n                          {t('analyticsDashboard.paymentMetrics.totalRevenue')} (KES)\r\n                        </dt>\r\n                        <dd className=\"text-lg font-medium text-gray-900\">{analyticsData?.paymentMetrics?.totalRevenue?.toLocaleString?.() || '0'}</dd>\r\n                      </dl>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Reports Analytics */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\r\n              <div className=\"bg-white shadow rounded-lg\">\r\n                <div className=\"px-4 py-5 sm:p-6\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                    {t('analyticsDashboard.reportMetrics.reportsByType')}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {reportMetrics.reportsByType.map((report) => (\r\n                      <div key={report.type} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"w-3 h-3 bg-red-500 rounded-full mr-3\"></div>\r\n                          <span className=\"text-sm font-medium text-gray-900 capitalize\">\r\n                            {t(`analyticsDashboard.reportTypes.${report.type}`)}\r\n                          </span>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">{report.count}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white shadow rounded-lg\">\r\n                <div className=\"px-4 py-5 sm:p-6\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                    {t('analyticsDashboard.reportMetrics.reportsBySeverity')}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {reportMetrics.reportsBySeverity.map((severity) => (\r\n                      <div key={severity.severity} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className={`w-3 h-3 rounded-full mr-3 ${\r\n                            severity.severity === 'critical' ? 'bg-red-600' :\r\n                            severity.severity === 'high' ? 'bg-orange-500' :\r\n                            severity.severity === 'medium' ? 'bg-yellow-500' : 'bg-green-500'\r\n                          }`}></div>\r\n                          <span className=\"text-sm font-medium text-gray-900 capitalize\">\r\n                            {t(`analyticsDashboard.severityLevels.${severity.severity}`)}\r\n                          </span>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">{severity.count}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Top Rated Routes */}\r\n            <div className=\"bg-white shadow rounded-lg mb-8\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                  {t('analyticsDashboard.ratingMetrics.topRatedRoutes')}\r\n                </h3>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          {t('analyticsDashboard.ratingMetrics.routeName')}\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          {t('analyticsDashboard.ratingMetrics.operator')}\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          {t('analyticsDashboard.ratingMetrics.avgRating')}\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          {t('analyticsDashboard.ratingMetrics.totalRatings')}\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {ratingMetrics.topRatedRoutes.slice(0, 10).map((route) => (\r\n                        <tr key={route._id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                            {route.routeNumber} - {route.routeName}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {route.operator}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            <div className=\"flex items-center\">\r\n                              <span className=\"text-yellow-400\">★</span>\r\n                              <span className=\"ml-1\">{route.avgRating.toFixed(1)}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {route.totalRatings}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* User & Subscription Analytics */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\r\n              <div className=\"bg-white shadow rounded-lg\">\r\n                <div className=\"px-4 py-5 sm:p-6\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                    {t('analyticsDashboard.userMetrics.userRoles')}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {userMetrics.userRoles.map((role) => (\r\n                      <div key={role.role} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"w-3 h-3 bg-blue-500 rounded-full mr-3\"></div>\r\n                          <span className=\"text-sm font-medium text-gray-900 capitalize\">\r\n                            {t(`analyticsDashboard.userRoles.${role.role}`)}\r\n                          </span>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">{role.count}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white shadow rounded-lg\">\r\n                <div className=\"px-4 py-5 sm:p-6\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                    {t('analyticsDashboard.subscriptionMetrics.subscriptionsByPlan')}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {subscriptionMetrics.subscriptionsByPlan.map((plan) => (\r\n                      <div key={plan.plan} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"w-3 h-3 bg-green-500 rounded-full mr-3\"></div>\r\n                          <span className=\"text-sm font-medium text-gray-900 capitalize\">\r\n                            {t(`analyticsDashboard.subscriptionPlans.${plan.plan}`)}\r\n                          </span>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">{plan.count}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Performance Metrics */}\r\n            <div className=\"bg-white shadow rounded-lg\">\r\n              <div className=\"px-4 py-5 sm:p-6\">\r\n                <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                  {t('analyticsDashboard.performanceMetrics')}\r\n                </h3>\r\n                \r\n                {performanceMetrics.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            {t('analyticsDashboard.metric')}\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            {t('analyticsDashboard.value')}\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            {t('analyticsDashboard.endpoint')}\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            {t('analyticsDashboard.timestamp')}\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {performanceMetrics.slice(0, 10).map((metric, index) => (\r\n                          <tr key={index}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 capitalize\">\r\n                              {getMetricTypeTranslation(metric.metricType)}\r\n                            </td>\r\n                            <td className={`px-6 py-4 whitespace-nowrap text-sm font-medium ${getMetricColor(metric.metricType, metric.value)}`}>\r\n                              {formatMetricValue(metric.metricType, metric.value)}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                              {metric.endpoint || '-'}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                              {new Date(metric.timestamp).toLocaleString()}\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n                    </svg>\r\n                    <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\r\n                      {t('analyticsDashboard.noMetrics')}\r\n                    </h3>\r\n                    <p className=\"mt-1 text-sm text-gray-500\">\r\n                      {t('analyticsDashboard.noMetricsDesc')}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AnalyticsDashboard"],"names":["AnalyticsDashboard","useTranslation","state","useApp","analyticsData","setAnalyticsData","useState","loading","setLoading","period","setPeriod","error","setError","useEffect","loadAnalytics","response","apiService","payload","mapped","_a","_b","_c","_d","r","_e","_f","_g","o","_h","_i","_j","x","_k","_l","_m","_n","_o","_p","_q","_r","p","_s","_t","_u","_v","_w","m","_x","_y","_z","_A","_B","err","trackPageView","formatMetricValue","metricType","value","getMetricColor","getMetricTypeTranslation","l","jsxs","jsx","userMetrics","reportMetrics","ratingMetrics","subscriptionMetrics","performanceMetrics","e","Fragment","report","severity","route","role","plan","metric","index"],"mappings":"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"}